<?xml version="1.0" encoding="UTF-8" ?>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<services xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/services.xsd">
    <description>Party Component Services</description>
    <vendor>OFBiz</vendor>
    <version>1.0</version>

    <!-- AddressMatchMap services -->
    <service name="createAddressMatchMap" engine="groovy" default-entity-name="AddressMatchMap" auth="true"
            location="component://party/groovyScripts/party/PartyServices.groovy" invoke="createAddressMatchMap">
        <description>Create an AddressMatchMap record</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="CREATE"/>
        <auto-attributes mode="IN" include="pk" optional="false"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
    </service>
    <service name="importAddressMatchMapCsv" engine="java" auth="true"
            location="org.apache.ofbiz.party.party.PartyServices" invoke="importAddressMatchMapCsv">
        <description>Import a CSV (name,value) of AddressMatchMap records</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="CREATE"/>
        <attribute name="uploadedFile" type="java.nio.ByteBuffer" mode="IN" optional="false"/>
        <attribute name="_uploadedFile_fileName" type="String" mode="IN" optional="false"/>
        <attribute name="_uploadedFile_contentType" type="String" mode="IN" optional="false"/>
    </service>
    <service name="removeAddressMatchMap" engine="entity-auto" default-entity-name="AddressMatchMap" auth="true" invoke="delete">
        <description>Delete an AddressMatchMap record</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="DELETE"/>
        <auto-attributes mode="IN" include="pk" optional="false"/>
    </service>
    <service name="clearAddressMatchMap" engine="groovy" default-entity-name="AddressMatchMap" auth="true"
            location="component://party/groovyScripts/party/PartyServices.groovy" invoke="clearAddressMatchMap">
        <description>Delete an AddressMatchMap record</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="DELETE"/>
    </service>

    <!-- Party services -->
    <service name="setPartyStatus" engine="java"
            location="org.apache.ofbiz.party.party.PartyServices" invoke="setPartyStatus" auth="true">
        <description>Set the party status. Requires PARTYMGR_UPDATE or PARTYMGR_STS_UPDATE permission. The change to statusId must be defined in StatusValidChange, otherwise
            this service will fail. The result is the original statusId, so that ECA conditions can check if a status has actually changed.</description>
        <permission-service service-name="partyStatusPermissionCheck" main-action="UPDATE"/>
        <attribute name="partyId" type="String" mode="IN" optional="false"/>
        <attribute name="statusId" type="String" mode="IN" optional="false"/>
        <attribute name="statusDate" type="Timestamp" mode="IN" optional="true"/>
        <attribute name="oldStatusId" type="String" mode="OUT" optional="false"/>
    </service>

    <service name="createPerson" engine="java" default-entity-name="Person"
            location="org.apache.ofbiz.party.party.PartyServices" invoke="createPerson" auth="false">
        <description>Create a Person</description>
        <auto-attributes mode="IN" include="pk" optional="true"/>
        <auto-attributes mode="OUT" include="pk" optional="false"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
        <attribute name="preferredCurrencyUomId" type="String" mode="IN" optional="true"/>
        <attribute name="description" type="String" mode="IN" optional="true"/>
        <attribute name="externalId" type="String" mode="IN" optional="true"/>
        <attribute name="statusId" type="String" mode="IN" optional="true"/>
        <!-- First and Last names are here optional. This allows to implement simple create user login screen where user is able create account 
            in system with username and password and then later populate rest of the account information. -->
<!--        <override name="firstName" optional="false"/>
        <override name="lastName" optional="false"/>
-->    </service>
    <service name="createPersonAndUserLogin" engine="simple" require-new-transaction="true"
            location="component://party/minilang/party/PartySimpleMethods.xml" invoke="createPersonAndUserLogin" auth="false">
        <description>Create a Person and UserLogin</description>
        <implements service="createUserLogin"/>
        <auto-attributes entity-name="Person" mode="IN" include="nonpk" optional="true"/>
        <auto-attributes entity-name="Party" mode="IN" include="nonpk" optional="true"/>
        <attribute name="partyId" type="String" mode="INOUT" optional="true" entity-name="Person"/>
        <attribute name="newUserLogin" type="Map" mode="OUT" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingNewUserLogin"/>
            </type-validate>
        </attribute>
    </service>

    <service name="createPartyGroupRoleAndContactMechs" engine="groovy" default-entity-name="PartyGroupRoleAndContactMechs"
            location="component://party/groovyScripts/party/PartySimpleMethods.groovy" invoke="createPartyGroupRoleAndContactMechs">
        <description>Create Party Group Role and Contact Mechs</description>
        <auto-attributes entity-name="PartyGroup" mode="IN" optional="true">
            <exclude field-name="partyId"/>
        </auto-attributes>
        <auto-attributes entity-name="PostalAddress" mode="IN" optional="true">
            <exclude field-name="contactMechId"/>
        </auto-attributes>
        <auto-attributes entity-name="TelecomNumber" mode="IN" optional="true">
            <exclude field-name="contactMechId"/>
        </auto-attributes>
        <attribute name="groupName" type="String" mode="IN" optional="false"/>
        <attribute name="address1" type="String" mode="IN" optional="true"/>
        <attribute name="contactNumber" type="String" mode="IN" optional="true"/>
        <attribute name="emailAddress" type="String" mode="IN" optional="true"/>
        <attribute name="postalAddContactMechPurpTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="phoneContactMechPurpTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="emailContactMechPurpTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="roleTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="partyId" type="String" mode="OUT" optional="false"/>
    </service>

    <service name="createPartyContactMechs" engine="simple" default-entity-name="createPartyContactMechs"
            location="component://party/minilang/party/PartySimpleMethods.xml" invoke="createPartyContactMechs">
        <description>Create Party Group Role and Contact Mechs</description>
        <attribute name="partyGroupContext" type="Map" mode="IN" optional="true"/>
        <attribute name="postalAddressContext" type="Map" mode="IN" optional="true"/>
        <attribute name="telecomNumberContext" type="Map" mode="IN" optional="true"/>
        <attribute name="postalAddContactMechPurpTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="contactNumber" type="String" mode="IN" optional="true"/>
        <attribute name="phoneContactMechPurpTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="emailAddress" type="String" mode="IN" optional="true"/>
        <attribute name="emailContactMechPurpTypeId" type="String" mode="IN" optional="true"/>
    </service>
    <service name="createPersonRoleAndContactMechs" engine="simple"
            location="component://party/minilang/party/PartySimpleMethods.xml" invoke="createPersonRoleAndContactMechs">
        <description>Creates a person, role and contactMechs</description>
        <auto-attributes entity-name="Person" mode="IN" include="nonpk" optional="true"/>
        <auto-attributes entity-name="PartyRole" mode="IN" include="nonpk" optional="true"/>
        <auto-attributes entity-name="PostalAddress" mode="IN" optional="true"/>
        <auto-attributes entity-name="TelecomNumber" mode="IN" optional="true"/>
        <attribute name="roleTypeId" mode="IN" type="String"/>
        <attribute name="emailAddress" type="String" mode="IN" optional="true"/>
        <attribute name="partyId" mode="OUT" type="String" optional="false"/>
    </service>
    <service name="updatePerson" engine="java" default-entity-name="Person"
            location="org.apache.ofbiz.party.party.PartyServices" invoke="updatePerson" auth="true">
        <description>Update a Person</description>
<!--        <required-permissions join-type="AND">
            <check-permission permission="update:party:${partyId}"/>
        </required-permissions> -->
        <permission-service service-name="partyGroupPermissionCheck" main-action="UPDATE"/>
        <auto-attributes mode="IN" include="pk" optional="true"><!-- if no partyId specified will use userLogin.partyId --></auto-attributes>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
        <attribute name="preferredCurrencyUomId" type="String" mode="IN" optional="true"/>
        <attribute name="description" type="String" mode="IN" optional="true"/>
        <attribute name="externalId" type="String" mode="IN" optional="true"/>
        <attribute name="statusId" type="String" mode="IN" optional="true"/>
        <override name="firstName" optional="false"/>
        <override name="lastName" optional="false"/>
    </service>
    <service name="createPartyGroup" engine="java" default-entity-name="PartyGroup"
            location="org.apache.ofbiz.party.party.PartyServices" invoke="createPartyGroup" auth="false">
        <description>Create a PartyGroup</description>
        <auto-attributes mode="INOUT" include="pk" optional="true"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
        <attribute name="partyTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="description" type="String" mode="IN" optional="true"/>
        <attribute name="preferredCurrencyUomId" type="String" mode="IN" optional="true"/>
        <attribute name="externalId" type="String" mode="IN" optional="true"/>
        <attribute name="statusId" type="String" mode="IN" optional="true"/>
        <override name="groupName" optional="false"/>
        <override name="comments" allow-html="safe"/>
    </service>
    <service name="updatePartyGroup" engine="java" default-entity-name="PartyGroup"
            location="org.apache.ofbiz.party.party.PartyServices" invoke="updatePartyGroup" auth="true">
        <description>Update a PartyGroup</description>
        <permission-service service-name="partyGroupPermissionCheck" main-action="UPDATE"/>
        <auto-attributes mode="IN" include="pk" optional="true"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
        <attribute name="description" type="String" mode="IN" optional="true"/>
        <attribute name="partyTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="preferredCurrencyUomId" type="String" mode="IN" optional="true"/>
        <attribute name="externalId" type="String" mode="IN" optional="true"/>
        <attribute name="statusId" type="String" mode="IN" optional="true"/>
        <override name="comments" allow-html="safe"/>
    </service>

    <service name="savePartyNameChange" engine="groovy"
        location="component://party/groovyScripts/party/PartyServices.groovy" invoke="savePartyNameChange" auth="true">
        <description>Save Party Name Change</description>
        <attribute name="partyId" type="String" mode="IN" optional="true"><!-- if empty, will use userLogin.partyId to handle special case for updatePerson, etc --></attribute>
        <attribute name="groupName" type="String" mode="IN" optional="true"/>
        <attribute name="firstName" type="String" mode="IN" optional="true"/>
        <attribute name="middleName" type="String" mode="IN" optional="true"/>
        <attribute name="lastName" type="String" mode="IN" optional="true"/>
        <attribute name="personalTitle" type="String" mode="IN" optional="true"/>
        <attribute name="suffix" type="String" mode="IN" optional="true"/>
    </service>
    <service name="getPartyNameForDate" engine="groovy"
        location="component://party/groovyScripts/party/PartyServices.groovy" invoke="getPartyNameForDate" auth="true">
        <description>Get Party Name For Date</description>
        <attribute name="partyId" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyId"/>
            </type-validate>
        </attribute>
        <attribute name="compareDate" type="Timestamp" mode="IN" optional="true"><!-- defaults to now --></attribute>
        <attribute name="lastNameFirst" type="String" mode="IN" optional="true"><!-- Y or N, defaults to N --></attribute>
        <attribute name="groupName" type="String" mode="OUT" optional="true"/>
        <attribute name="firstName" type="String" mode="OUT" optional="true"/>
        <attribute name="middleName" type="String" mode="OUT" optional="true"/>
        <attribute name="lastName" type="String" mode="OUT" optional="true"/>
        <attribute name="personalTitle" type="String" mode="OUT" optional="true"/>
        <attribute name="suffix" type="String" mode="OUT" optional="true"/>
        <attribute name="fullName" type="String" mode="OUT" optional="true"/>
        <attribute name="gender" type="String" mode="OUT" optional="true" />
    </service>

    <service name="createAffiliate" engine="java"
            location="org.apache.ofbiz.party.party.PartyServices" invoke="createAffiliate" auth="false">
        <description>Create an Affiliate</description>
        <attribute name="partyId" type="String" mode="INOUT"/>
        <attribute name="affiliateName" type="String" mode="IN"/>
        <attribute name="affiliateDescription" type="String" mode="IN" optional="true"/>
        <attribute name="yearEstablished" type="String" mode="IN" optional="true"/>
        <attribute name="siteType" type="String" mode="IN" optional="true"/>
        <attribute name="sitePageViews" type="String" mode="IN" optional="true"/>
        <attribute name="siteVisitors" type="String" mode="IN" optional="true"/>
    </service>

    <service name="updateAffiliate" engine="java"
            location="org.apache.ofbiz.party.party.PartyServices" invoke="updateAffiliate" auth="true">
        <description>Update an Affiliate</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="UPDATE"/>
        <attribute name="partyId" type="String" mode="IN" optional="true"/>
        <attribute name="affiliateName" type="String" mode="IN"/>
        <attribute name="affiliateDescription" type="String" mode="IN" optional="true"/>
        <attribute name="yearEstablished" type="String" mode="IN" optional="true"/>
        <attribute name="siteType" type="String" mode="IN" optional="true"/>
        <attribute name="sitePageViews" type="String" mode="IN" optional="true"/>
        <attribute name="siteVisitors" type="String" mode="IN" optional="true"/>
    </service>

    <service name="createPartyNote" engine="java"
            location="org.apache.ofbiz.party.party.PartyServices" invoke="createPartyNote" auth="true">
        <description>Create a note item and associate with a party. If a noteId is passed, creates an assoication to that note instead.</description>
        <attribute name="partyId" type="String" mode="IN" optional="false"/>
        <attribute name="noteName" type="String" mode="IN" optional="true"/>
        <attribute name="noteId" type="String" mode="INOUT" optional="true"/>
        <attribute name="note" type="String" mode="IN" optional="true"/>
    </service>

    <service name="createRoleType" default-entity-name="RoleType" engine="entity-auto" invoke="create" auth="true">
        <description>Create a new role type</description>
        <auto-attributes include="pk" mode="INOUT" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <override name="description" optional="false"/>
    </service>

    <service name="setPartyProfileDefaults" engine="groovy"
            location="component://party/groovyScripts/party/PartyServices.groovy" invoke="setPartyProfileDefaults" auth="true">
        <description>Sets the party (customer) profile defaults</description>
        <permission-service service-name="partyIdPermissionCheck" main-action="UPDATE"/>
        <auto-attributes mode="IN" entity-name="PartyProfileDefault" include="all" optional="true"/>
        <override name="productStoreId" optional="false"/>
    </service>

    <service name="createPartyAttribute" default-entity-name="PartyAttribute" engine="entity-auto" invoke="create" auth="true">
        <description>create a party attribute record</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="CREATE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="updatePartyAttribute" default-entity-name="PartyAttribute" engine="entity-auto" invoke="update" auth="true">
        <description>updates a party attribute record</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="UPDATE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="removePartyAttribute" default-entity-name="PartyAttribute" engine="entity-auto" invoke="delete" auth="true">
        <description>removes a party attribute record</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="DELETE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>

    <service name="linkPartyRecord" engine="java" auth="true" use-transaction="false"
                location="org.apache.ofbiz.party.party.PartyServices" invoke="linkParty">
        <description>Merges customer accounts and disabled the duplicate</description>
        <attribute name="partyId" type="String" mode="INOUT" optional="false"/>
        <attribute name="partyIdTo" type="String" mode="IN" optional="false"/>
    </service>

    <service name="lookupParty" engine="groovy"
        location="component://party/groovyScripts/party/LookupServices.groovy" invoke="lookupParty" auth="true">
        <description>Performs a lookup for parties</description>
        <deprecated use-instead="performFindParty" since="Upcoming Branch">
            use performFindParty to realize your search, the service lookupParty is inconsistent
            and need to replace by appropriate service
        </deprecated>
        <attribute name="firstName" type="String" form-display="true" form-label="First name" mode="IN" optional="true"/>
        <attribute name="lastName" type="String" form-display="true" form-label="Last name" mode="IN" optional="true"/>
        <attribute name="lookupResult" type="List" mode="OUT" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingLookupResult"/>
            </type-validate>
        </attribute>
    </service>

    <service name="findPartiesById" engine="java"  auth="true"
            location="org.apache.ofbiz.party.party.PartyServices" invoke="findPartyById">
        <description>Find the partyId corresponding to a reference and a reference type</description>
        <attribute type="String" mode="IN" name="idToFind" optional="false"/>
        <attribute type="String" mode="IN" name="partyIdentificationTypeId" optional="true"/>
        <attribute type="String" mode="IN" name="searchPartyFirst" optional="true"/>
        <attribute type="String" mode="IN" name="searchAllId" optional="true"/>
        <attribute type="org.apache.ofbiz.entity.GenericValue" mode="OUT" name="party" optional="true"/>
        <attribute type="List" mode="OUT" name="partiesFound" optional="true"/>
    </service>

    <!-- Party Role services -->
    <service name="createPartyRole" default-entity-name="PartyRole" engine="entity-auto" invoke="create" auth="true">
        <description>Create a Party Role (add a Role to a Party). The logged in user must have PARTYMGR_CREATE or have
            permission to change the role of this partyId</description>
        <permission-service service-name="partyRolePermissionCheck" main-action="CREATE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>
    <service name="deletePartyRole" default-entity-name="PartyRole" engine="entity-auto" invoke="delete" auth="true">
        <description>Delete a Party Role (remove a Role from a Party). The logged in user must have PARTYMGR_DELETE or have
            permission to change the role of this partyId</description>
        <permission-service service-name="partyRolePermissionCheck" main-action="DELETE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>
    <service name="ensurePartyRole" engine="simple"
            location="component://party/minilang/party/PartySimpleMethods.xml" invoke="ensureNaPartyRole" auth="false">
        <description>Ensure that the party is in the specified role.</description>
        <attribute name="partyId" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyId"/>
            </type-validate>
        </attribute>
        <attribute name="roleTypeId" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingRoleTypeId"/>
            </type-validate>
        </attribute>
    </service>
    <service name="ensureNaPartyRole" engine="simple"
            location="component://party/minilang/party/PartySimpleMethods.xml" invoke="ensureNaPartyRole" auth="false">
        <description>Ensure that the party is in the _NA_ role.</description>
        <attribute name="partyId" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyId"/>
            </type-validate>
        </attribute>
    </service>
    <service name="ensurePartyRoleFrom" engine="simple"
            location="component://party/minilang/party/PartySimpleMethods.xml" invoke="ensureNaPartyRole" auth="true">
        <description>Ensure that the party indicate by partyIdFrom is in the roleTypeIdFrom specifc role. If roleTypeIdFrom isn't present use _NA_</description>
        <attribute name="partyIdFrom" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyIdFrom"/>
            </type-validate>
        </attribute>
        <attribute name="roleTypeIdFrom" type="String" mode="IN" optional="true"/>
    </service>
    <service name="ensurePartyRoleTo" engine="simple"
            location="component://party/minilang/party/PartySimpleMethods.xml" invoke="ensureNaPartyRole" auth="true">
        <description>Ensure that the party indicate by partyIdTo is in the roleTypeIdTo specific role. If roleTypeIdTo isn't present use _NA_</description>
        <attribute name="partyIdTo" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyIdTo"/>
            </type-validate>
        </attribute>
        <attribute name="roleTypeIdTo" type="String" mode="IN" optional="true"/>
    </service>

    <!-- Party Relationship services -->
    <service name="createPartyRelationship" default-entity-name="PartyRelationship" engine="groovy"
        location="component://party/groovyScripts/party/PartyServices.groovy" invoke="createPartyRelationship" auth="true">
        <description>
            Create a Relationship between two Parties;
            if partyIdFrom is not specified the partyId of the current userLogin will be used;
            if roleTypeIds are not specified they will default to "_NA_".
            If a partyIdFrom is passed in, it will be used if the userLogin has PARTYMGR_REL_CREATE permission.
        </description>
        <permission-service service-name="partyRelationshipPermissionCheck" main-action="CREATE"/>
        <auto-attributes include="pk" mode="IN" optional="true"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <override name="partyIdTo" optional="false"/>
    </service>
    <service name="updatePartyRelationship" default-entity-name="PartyRelationship" engine="groovy"
        location="component://party/groovyScripts/party/PartyServices.groovy" invoke="updatePartyRelationship" auth="true">
        <description>
            Update a Relationship between two Parties;
            if partyIdFrom is not specified the partyId of the current userLogin will be used;
            if roleTypeIds are not specified they will default to "_NA_".
            If a partyIdFrom is passed in, it will be used if the userLogin has PARTYMGR_REL_UPDATE permission.
        </description>
        <permission-service service-name="partyRelationshipPermissionCheck" main-action="UPDATE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <override name="partyIdFrom" optional="true"/>
        <override name="roleTypeIdFrom" optional="true"/>
        <override name="roleTypeIdTo" optional="true"/>
    </service>
    <service name="deletePartyRelationship" default-entity-name="PartyRelationship" engine="groovy"
        location="component://party/groovyScripts/party/PartyServices.groovy" invoke="deletePartyRelationship" auth="true">
        <description>
            Delete a Relationship between two Parties;
            if partyIdFrom is not specified the partyId of the current userLogin will be used;
            if roleTypeIds are not specified they will default to "_NA_".
        </description>
        <permission-service service-name="partyRelationshipPermissionCheck" main-action="DELETE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <override name="partyIdFrom" optional="true"/>
        <override name="roleTypeIdFrom" optional="true"/>
        <override name="roleTypeIdTo" optional="true"/>
    </service>

    <service name="createPartyRelationshipAndRole" engine="group" auth="true">
        <description>Create party's roles and party's relationship</description>
        <group>
            <invoke name="ensurePartyRoleFrom"/>
            <invoke name="ensurePartyRoleTo"/>
            <invoke name="createPartyRelationship"/>
        </group>
    </service>

    <service name="createPartyRelationshipType" engine="entity-auto" default-entity-name="PartyRelationshipType" invoke="create" auth="true">
        <description>Create a new Party Relationship type</description>
        <permission-service service-name="partyIdPermissionCheck" main-action="CREATE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <override name="partyRelationshipName" optional="false"/>
    </service>

    <service name="createUpdatePartyRelationshipAndRoles" engine="java" default-entity-name="PartyRelationship"
        location="org.apache.ofbiz.party.party.PartyRelationshipServices" invoke="createUpdatePartyRelationshipAndRoles" auth="true">
        <description>
            Create or update both parties roles and parties relationship, partyRelationshipTypeId being mandatory.
            The relationship is considered from one side or another (partyId is checked internally against partyIdFrom)
            If a type of parties relationship exists PartyIdTo or PartyIdFrom are updated.
            The history is maintained, allowing to track changes.
        </description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <attribute name="partyId" type="String" mode="IN" optional="false"/>
        <override name="fromDate" optional="true"/>
    </service>

    <service name="createPartyRelationshipContactAccount" engine="groovy"
        location="component://party/groovyScripts/party/PartyServices.groovy" invoke="createPartyRelationshipContactAccount" auth="true">
        <description>create a company/contact relationship and add the related roles</description>
        <attribute name="accountPartyId" type="String" mode="IN"/>
        <attribute name="contactPartyId" type="String" mode="IN"/>
        <attribute name="comments" type="String" mode="IN" optional="true" allow-html="safe"/>
    </service>

    <!-- ContactMech services -->
    <service name="createPartyContactMech" engine="simple"
            location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="createPartyContactMech" auth="true">
        <description>Create a PartyContactMech</description>
        <permission-service service-name="partyContactMechPermissionCheck" main-action="CREATE"/>
        <auto-attributes entity-name="ContactMech" include="nonpk" mode="IN" optional="true"/>
        <auto-attributes entity-name="PartyContactMech" include="all" mode="IN" optional="true"/>
        <attribute name="contactMechPurposeTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="INOUT" optional="true"/>
        <attribute name="contactMechTypeId" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingContactMechTypeId"/>
            </type-validate>
        </attribute>
    </service>
    <service name="updatePartyContactMech" engine="simple"
            location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="updatePartyContactMech" auth="true">
        <description>Update a PartyContactMech</description>
        <permission-service service-name="partyContactMechPermissionCheck" main-action="UPDATE"/>
        <auto-attributes entity-name="PartyContactMech" include="all" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="INOUT" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingContactMechId"/>
            </type-validate>
        </attribute>
        <attribute name="contactMechTypeId" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingContactMechTypeId"/>
            </type-validate>
        </attribute>
        <attribute name="infoString" type="String" mode="IN" optional="true"/>
        <attribute name="newContactMechId" type="String" mode="IN" optional="true"/>
    </service>
    <service name="deletePartyContactMech" engine="simple"
            location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="deletePartyContactMech" auth="true">
        <description>Delete a PartyContactMech</description>
        <permission-service service-name="partyContactMechPermissionCheck" main-action="DELETE"/>
        <attribute name="partyId" type="String" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingContactMechId"/>
            </type-validate>
        </attribute>
    </service>
    <!-- Party ContachMech reverse find -->
    <service name="findPartyFromEmailAddress" engine="simple"
        location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="findPartyFromEmailAddress" auth="true">
        <description>Find the partyId/contactMechId for a specific email address, if not found do not return a value</description>
        <attribute name="address" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingAddress"/>
            </type-validate>
        </attribute>
        <attribute name="caseInsensitive" type="String" mode="IN" optional="true"/>
        <attribute name="personal" type="String" mode="IN" optional="true"/><!-- field not used -->
        <attribute name="fromDate" type="Timestamp" mode="IN" optional="true"/>
        <attribute name="partyId" type="String" mode="OUT" optional="true"/>
        <attribute name="contactMechId" type="String" mode="OUT" optional="true"/>
    </service>
    <service name="findPartyFromTelephone" engine="simple"
        location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="findPartyFromTelephone" auth="true">
        <description>Find the partyId/contactMechId for a specific telephone number, if not found do not return a value</description>
        <attribute name="telno" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingTelno"/>
            </type-validate>
        </attribute>
        <attribute name="partyId" type="String" mode="OUT" optional="true"/>
        <attribute name="contactMechId" type="String" mode="OUT" optional="true"/>
    </service>
    <service name="findPartyFromTelephoneComplete" engine="simple"
        location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="findPartyFromTelephoneComplete" auth="true">
        <description>
            Find the partyId/contactMechId for a specific telephone number, if not found do not return a value.
            Same than above but keep the number complete internally.
        </description>
        <attribute name="telno" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingTelno"/>
            </type-validate>
        </attribute>
        <attribute name="partyId" type="String" mode="OUT" optional="true"/>
        <attribute name="contactMechId" type="String" mode="OUT" optional="true"/>
    </service>
    <service name="createPartyPostalAddress" engine="simple"
            location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="createPartyPostalAddress" auth="true">
        <description>Create a Postal Address</description>
        <permission-service service-name="partyContactMechPermissionCheck" main-action="CREATE"/>
        <auto-attributes entity-name="PartyContactMech" include="all" mode="IN" optional="true"/>
        <auto-attributes entity-name="PostalAddress" include="nonpk" mode="IN" optional="true"/>
        <attribute name="paymentMethodId" type="String" mode="IN" optional="true"/>
        <attribute name="contactMechPurposeTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="OUT" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingContactMechId"/>
            </type-validate>
        </attribute>
        <attribute name="latitude" type="String" mode="IN" optional="true"/>
        <attribute name="longitude" type="String" mode="IN" optional="true"/>
        <override name="address1" optional="false"/>
        <override name="city" optional="false"/>
        <override name="postalCode" optional="false"/>
    </service>
    <service name="updatePartyPostalAddress" engine="simple"
            location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="updatePartyPostalAddress" auth="true">
        <description>Update a Postal Address</description>
        <permission-service service-name="partyContactMechPermissionCheck" main-action="UPDATE"/>
        <auto-attributes entity-name="PartyContactMech" include="all" mode="IN" optional="true"/>
        <auto-attributes entity-name="PostalAddress" include="nonpk" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="INOUT" optional="false"/>
        <attribute name="directions" type="String" mode="IN" optional="true"/> <!-- ?? -->
        <override name="address1" optional="false"/>
        <override name="city" optional="false"/>
        <override name="postalCode" optional="false"/>
    </service>
    <service name="createPartyTelecomNumber" engine="simple"
            location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="createPartyTelecomNumber" auth="true">
        <description>Create a Telecommunications Number</description>
        <permission-service service-name="partyContactMechPermissionCheck" main-action="CREATE"/>
        <auto-attributes entity-name="PartyContactMech" include="all" mode="IN" optional="true"/>
        <auto-attributes entity-name="TelecomNumber" include="nonpk" mode="IN" optional="true"/>
        <attribute name="contactMechPurposeTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="updatePartyTelecomNumber" engine="simple"
            location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="updatePartyTelecomNumber" auth="true">
        <description>Update a Telecommunications Number</description>
        <permission-service service-name="partyContactMechPermissionCheck" main-action="UPDATE"/>
        <auto-attributes entity-name="PartyContactMech" include="all" mode="IN" optional="true"/>
        <auto-attributes entity-name="TelecomNumber" include="nonpk" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="INOUT" optional="false"/>
    </service>
    <service name="createPartyEmailAddress" engine="simple"
            location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="createPartyEmailAddress" auth="true">
        <description>Create an Email Address</description>
        <permission-service service-name="partyContactMechPermissionCheck" main-action="CREATE"/>
        <auto-attributes entity-name="ContactMech" include="nonpk" mode="IN" optional="true"/>
        <auto-attributes entity-name="PartyContactMech" include="all" mode="IN" optional="true"/>
        <attribute name="contactMechPurposeTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="INOUT" optional="true"/>
        <attribute name="emailAddress" type="String" mode="IN" optional="false"/>
    </service>
    <service name="updatePartyEmailAddress" engine="simple"
            location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="updatePartyEmailAddress" auth="true">
        <description>Update an Email Address</description>
        <permission-service service-name="partyContactMechPermissionCheck" main-action="UPDATE"/>
        <auto-attributes entity-name="PartyContactMech" include="all" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="INOUT" optional="false"> <!-- the out paramater is the id of the new address -->
            <type-validate>
                    <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingContactMechId"/>
            </type-validate>
         </attribute>
         <attribute name="emailAddress" type="String" mode="IN" optional="false">
             <type-validate>
                 <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingEmailAddress"/>
             </type-validate>
         </attribute>
         <attribute name="oldContactMechId" type="String" mode="OUT" optional="false">
             <type-validate>
                 <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingOldContactMechId"/>
             </type-validate>
         </attribute>
    </service>
    <service name="copyPartyContactMechs" engine="java"
        location="org.apache.ofbiz.party.contact.ContactMechServices" invoke="copyPartyContactMechs" auth="true">
        <description>Copies all contact mechs from the partyIdFrom to the partyIdTo. Does not delete or overwrite any contact mechs.</description>
        <attribute name="partyIdFrom" type="String" mode="IN" optional="false"/>
        <attribute name="partyIdTo" type="String" mode="IN" optional="false"/>
    </service>
    <service name="createPartyFtpAddress" engine="groovy"
             location="component://party/groovyScripts/contact/ContactMechServices.groovy" invoke="createPartyFtpAddress" auth="true">
        <description>Create an Ftp Address associated to a party</description>
        <permission-service service-name="partyContactMechPermissionCheck" main-action="CREATE"/>
        <auto-attributes entity-name="ContactMech" include="nonpk" mode="IN" optional="true"/>
        <auto-attributes entity-name="PartyContactMech" mode="IN" optional="true"/>
        <auto-attributes entity-name="FtpAddress" mode="IN" optional="true"/>
        <attribute name="contactMechPurposeTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="INOUT" optional="true"/>
    </service>
    <service name="updatePartyFtpAddress" engine="groovy"
             location="component://party/groovyScripts/contact/ContactMechServices.groovy" invoke="updatePartyFtpAddress" auth="true">
        <description>Update an Ftp Address associated to a party</description>
        <permission-service service-name="partyContactMechPermissionCheck" main-action="UPDATE"/>
        <auto-attributes entity-name="PartyContactMech" mode="IN" optional="true"/>
        <auto-attributes entity-name="FtpAddress" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="INOUT"/>
    </service>
    <!-- contact mech attribute services -->
    <service name="createContactMechAttribute" engine="entity-auto" default-entity-name="ContactMechAttribute" invoke="create" auth="true">
        <description>create a contact mech attribute record</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="CREATE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="updateContactMechAttribute" engine="entity-auto" default-entity-name="ContactMechAttribute" invoke="update" auth="true">
        <description>updates a contact mech attribute record</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="UPDATE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="removeContactMechAttribute" engine="entity-auto" default-entity-name="ContactMechAttribute" invoke="delete" auth="true">
        <description>removes a contact mech attribute record</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="DELETE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>

    <!-- PartyContactMechPurpose services -->
    <service name="createPartyContactMechPurpose" engine="java"
            location="org.apache.ofbiz.party.contact.ContactMechServices" invoke="createPartyContactMechPurpose" auth="true">
        <description>Create a Party ContactMech Purpose</description>
        <attribute name="partyId" type="String" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="IN" optional="false"/>
        <attribute name="contactMechPurposeTypeId" type="String" mode="IN" optional="false"/>
        <attribute name="fromDate" type="Timestamp" mode="INOUT" optional="true"/>
    </service>
    <service name="deletePartyContactMechPurpose" default-entity-name="PartyContactMechPurpose" engine="entity-auto" invoke="delete">
        <description>Delete a Party Contact Mech Purpose</description>
        <permission-service service-name="partyIdPermissionCheck" main-action="DELETE"/>
        <auto-attributes mode="IN" include="pk" optional="false"/>
    </service>
    <service name="expirePartyContactMechPurpose" default-entity-name="PartyContactMechPurpose" engine="entity-auto" invoke="expire">
        <description>Expires a Party Contact Mech Purpose</description>
        <permission-service service-name="partyContactMechPermissionCheck" main-action="DELETE"/>
        <auto-attributes mode="IN" include="pk" optional="false"/>
    </service>

    <!-- ContactMechLink services -->
    <service name="createContactMechLink" default-entity-name="ContactMechLink" engine="entity-auto" invoke="create" auth="true">
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>
    <service name="deleteContactMechLink" default-entity-name="ContactMechLink" engine="entity-auto" invoke="delete" auth="true">
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>

    <!-- PostalAddressBoundary -->
    <service name="createPostalAddressBoundary" default-entity-name="PostalAddressBoundary" engine="entity-auto" invoke="create">
        <description>Create a Postal Address Boundary</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="CREATE"/>
        <auto-attributes mode="IN" include="pk" optional="false"/>
    </service>
    <service name="deletePostalAddressBoundary" default-entity-name="PostalAddressBoundary" engine="entity-auto" invoke="delete">
        <description>Delete a Postal Address Boundary</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="DELETE"/>
        <auto-attributes mode="IN" include="pk" optional="false"/>
    </service>

    <!-- PartyClassification -->
    <service name="createPartyClassification" default-entity-name="PartyClassification" engine="entity-auto" invoke="create">
        <description>create PartyClassification</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="CREATE"/>
        <auto-attributes mode="IN" include="pk" optional="false"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
        <override name="fromDate" optional="true"/>
    </service>
    <service name="updatePartyClassification" default-entity-name="PartyClassification" engine="entity-auto" invoke="update">
        <description>update PartyClassification</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="UPDATE"/>
        <auto-attributes mode="IN" include="pk" optional="false"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
    </service>
    <service name="deletePartyClassification" default-entity-name="PartyClassification" engine="entity-auto" invoke="delete">
        <description>delete PartyClassification</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="DELETE"/>
        <auto-attributes mode="IN" include="pk" optional="false"/>
    </service>
    <service name="createPartyClassificationGroup" default-entity-name="PartyClassificationGroup" engine="entity-auto" invoke="create">
        <description>create PartyClassificationGroup</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="CREATE"/>
        <auto-attributes mode="OUT" include="pk" optional="false"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
    </service>
    <service name="updatePartyClassificationGroup" default-entity-name="PartyClassificationGroup" engine="entity-auto" invoke="update">
        <description>update PartyClassificationGroup</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="UPDATE"/>
        <auto-attributes mode="IN" include="pk" optional="false"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
    </service>
    <service name="deletePartyClassificationGroup" default-entity-name="PartyClassificationGroup" engine="entity-auto" invoke="delete">
        <description>delete PartyClassificationGroup</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="DELETE"/>
        <auto-attributes mode="IN" include="pk" optional="false"/>
    </service>

    <!-- PartyIdentification -->
    <service name="createPartyIdentification" engine="entity-auto" default-entity-name="PartyIdentification" invoke="create">
        <description>create PartyIdentification entity</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="CREATE"/>
        <auto-attributes mode="IN" include="pk"/>
        <auto-attributes mode="IN" optional="true" include="nonpk"/>
    </service>
    <service name="updatePartyIdentification" engine="entity-auto" default-entity-name="PartyIdentification" invoke="update">
        <description>update PartyIdentification entity</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="UPDATE"/>
        <auto-attributes mode="IN" include="pk"/>
        <auto-attributes mode="IN" optional="true" include="nonpk"/>
    </service>
    <service name="deletePartyIdentification" engine="entity-auto" default-entity-name="PartyIdentification" invoke="delete">
        <description>delete PartyClassificationGroup</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="DELETE"/>
        <auto-attributes mode="IN" include="pk"/>
    </service>
    <service name="createPartyIdentifications" engine="groovy" default-entity-name="PartyIdentification"
            location="component://party/groovyScripts/party/PartyServices.groovy" invoke="createPartyIdentifications">
        <description>create many identifications with format in map identifications : [partyType : TYPE, TYPE : value]</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="CREATE"/>
        <attribute name="partyId" mode="IN" type="String"/>
        <attribute name="identifications" mode="IN" type="Map" />
    </service>

    <!-- Vendor -->
    <service name="createVendor" default-entity-name="Vendor" engine="entity-auto" invoke="create" auth="true">
        <description>Create Vendor Information</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="CREATE"/>
        <auto-attributes entity-name="Vendor" include="pk" mode="IN" optional="false"/>
        <auto-attributes entity-name="Vendor" include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="updateVendor" default-entity-name="Vendor" engine="entity-auto" invoke="update" auth="true">
        <description>Update Vendor Information</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="UPDATE"/>
        <auto-attributes entity-name="Vendor" include="pk" mode="IN" optional="false"/>
        <auto-attributes entity-name="Vendor" include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="deleteVendor" default-entity-name="Vendor" engine="entity-auto" invoke="delete" auth="true">
        <description>Remove Vendor Information</description>
        <permission-service service-name="partyBasePermissionCheck" main-action="DELETE"/>
        <auto-attributes entity-name="Vendor" include="pk" mode="IN" optional="false"/>
    </service>

    <!-- PartyDataSource services -->
    <service name="createPartyDataSource" engine="entity-auto" default-entity-name="PartyDataSource" invoke="create" auth="true">
        <description>Creates a relation between a Party and a DataSource using PartyDataSource. The userLogin must have PARTYMGR_SRC_CREATE permission.</description>
        <permission-service service-name="partyDatasourcePermissionCheck" main-action="CREATE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <override name="fromDate" mode="IN" type="Timestamp" optional="true"/>
    </service>

    <service name="setCommunicationEventStatus" engine="groovy" default-entity-name="CommunicationEvent"
             location="component://party/groovyScripts/communication/CommunicationEventServices.groovy" invoke="setCommunicationEventStatus" auth="true">
        <description>Set the Communication event Status</description>
        <permission-service service-name="partyCommunicationEventPermissionCheck" main-action="UPDATE"/>
        <auto-attributes mode="IN" include="pk" optional="false"/>
        <attribute name="statusId" type="String" mode="IN" optional="false"/>
        <attribute name="oldStatusId" type="String" mode="OUT" optional="true"/>
        <attribute name="setRoleStatusToComplete" mode="IN" type="String" default-value="N"/>
        <attribute name="partyIdFrom" type="String" mode="IN" optional="true"/>
    </service>

    <service name="setCommunicationEventRoleStatus" engine="groovy" default-entity-name="CommunicationEventRole"
             location="component://party/groovyScripts/communication/CommunicationEventServices.groovy" invoke="setCommunicationEventRoleStatus" auth="true">
        <description>Set the Communication event  Status for a specific role</description>
        <permission-service service-name="partyCommunicationEventPermissionCheck" main-action="UPDATE"/>
        <auto-attributes mode="IN" include="pk" optional="false"/>
        <attribute name="statusId" type="String" mode="IN" optional="false"/>
        <attribute name="oldStatusId" type="String" mode="OUT" optional="true"/>
    </service>

    <service name="createCommunicationEventInterface" engine="interface" location="" invoke="">
        <description>Create a Communication Event with or w/o permission check</description>
        <auto-attributes entity-name="CommunicationEvent" include="nonpk" mode="IN" optional="true"/>
        <auto-attributes entity-name="CommunicationEvent" include="pk" mode="INOUT" optional="true"/>
        <attribute name="productId" type="String" mode="IN" optional="true"/>
        <attribute name="orderId" type="String" mode="IN" optional="true"/>
        <attribute name="returnId" type="String" mode="IN" optional="true"/>
        <attribute name="custRequestId" type="String" mode="IN" optional="true"/>
        <attribute name="action" type="String" mode="IN" optional="true"/><!-- to indicate any special action like: REPLY, REPLYALL, FORWARD or empty for no special action-->
        <override name="headerString" allow-html="safe"/>
        <override name="content" allow-html="safe"/>
        <override name="messageId" allow-html="safe"/>
        <override name="subject" allow-html="safe"/>
    </service>
    <service name="createCommunicationEvent" engine="groovy"
             location="component://party/groovyScripts/communication/CommunicationEventServices.groovy" invoke="createCommunicationEvent" auth="true">
        <description>Create a Communication Event with permission check</description>
        <permission-service service-name="partyCommunicationEventPermissionCheck" main-action="CREATE"/>
        <implements service="createCommunicationEventInterface"/>
    </service>
    <service name="createCommunicationEventWithoutPermission" engine="groovy"
             location="component://party/groovyScripts/communication/CommunicationEventServices.groovy" invoke="createCommunicationEventWithoutPermission" auth="false">
        <description>Create a Communication Event without permission check</description>
        <implements service="createCommunicationEventInterface"/>
    </service>

    <service name="updateCommunicationEvent" engine="groovy"
             location="component://party/groovyScripts/communication/CommunicationEventServices.groovy" invoke="updateCommunicationEvent" auth="true">
        <description>Update a Communication Event</description>
        <permission-service service-name="partyCommunicationEventPermissionCheck" main-action="UPDATE"/>
        <auto-attributes entity-name="CommunicationEvent" include="pk" mode="IN" optional="false"/>
        <auto-attributes entity-name="CommunicationEvent" include="nonpk" mode="IN" optional="true"/>
        <attribute name="contactMechPurposeTypeIdFrom" type="String" mode="IN" optional="true"><description>Set a specific purpose for the originator email</description></attribute>
        <attribute name="oldStatusId" type="String" mode="OUT" optional="true"/>
        <override name="messageId" allow-html="any"/>
        <override name="content" allow-html="any"/>
        <override name="subject" allow-html="safe"/>
    </service>


    <service name="deleteCommunicationEvent" engine="groovy"
             location="component://party/groovyScripts/communication/CommunicationEventServices.groovy" invoke="deleteCommunicationEvent" auth="true">
        <description>Delete a Communication Event, optionally delete the attached content and dataresource</description>
        <permission-service service-name="partyCommunicationEventPermissionCheck" main-action="DELETE"/>
        <auto-attributes entity-name="CommunicationEvent" include="pk" mode="IN" optional="false"/>
        <attribute name="delContentDataResource" type="String" mode="IN" optional="true"/>
    </service>

    <service name="deleteCommunicationEventWorkEffort" engine="groovy"
             location="component://party/groovyScripts/communication/CommunicationEventServices.groovy" invoke="deleteCommunicationEventWorkEffort" auth="true">
        <description>Delete a Communication Event, optionally delete the attached content and dataresource
            and when this is the only communication event connected to a workeffort delete the workeffort too.</description>
        <permission-service service-name="partyCommunicationEventPermissionCheck" main-action="DELETE"/>
        <auto-attributes entity-name="CommunicationEvent" include="pk" mode="IN" optional="false"/>
        <attribute name="delContentDataResource" type="String" mode="IN" optional="true"/>
    </service>

    <service name="createCommunicationEventPurpose" default-entity-name="CommunicationEventPurpose" engine="entity-auto" invoke="create" auth="true">
        <description>Create a Communication Event Purpose</description>
        <permission-service service-name="partyCommunicationEventPermissionCheck" main-action="CREATE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="updateCommunicationEventPurpose" default-entity-name="CommunicationEventPurpose" engine="entity-auto" invoke="update" auth="true">
        <description>Update a CommunicationEventPurpose</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="removeCommunicationEventPurpose" default-entity-name="CommunicationEventPurpose" engine="entity-auto" invoke="delete" auth="true">
        <description>Remove a Communication Event Purpose</description>
        <permission-service service-name="partyCommunicationEventPermissionCheck" main-action="DELETE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>
    <service name="createCustRequestCommEvent" default-entity-name="CustRequestCommEvent" engine="entity-auto" invoke="create" auth="true">
        <description>Create a CustRequestCommEvent</description>
        <permission-service service-name="partyCommunicationEventPermissionCheck" main-action="CREATE"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>
    <service name="deleteCustRequestCommEvent" default-entity-name="CustRequestCommEvent" engine="entity-auto" invoke="delete" auth="true">
        <description>Delete a CustRequestCommEvent</description>
        <permission-service service-name="partyCommunicationEventPermissionCheck" main-action="DELETE"/>
        <auto-attributes include="pk" mode="IN"/>
    </service>
    <service name="createCommunicationEventRoleInterface" engine="interface" location="" invoke="">
        <description>Create a Communication Event Role with or w/o permission check</description>
        <auto-attributes entity-name="CommunicationEventRole" include="pk" mode="IN" optional="false"/>
        <auto-attributes entity-name="CommunicationEventRole" include="nonpk" mode="IN" optional="true"/>
    </service>

    <service name="createCommunicationEventRole" engine="groovy"
             location="component://party/groovyScripts/communication/CommunicationEventServices.groovy" invoke="createCommunicationEventRole" auth="true">
        <description>Create a Communication Event Role with permission check</description>
        <permission-service service-name="partyCommunicationEventPermissionCheck" main-action="CREATE"/>
        <implements service="createCommunicationEventRoleInterface"/>
    </service>

    <service name="createCommunicationEventRoleWithoutPermission" engine="groovy"
            location="component://party/groovyScripts/communication/CommunicationEventServices.groovy" invoke="createCommunicationEventRole" auth="true">
        <description>Create a Communication Event Role without permission check</description>
        <implements service="createCommunicationEventRoleInterface"/>
    </service>

    <service name="updateCommunicationEventRole" engine="entity-auto" invoke="update" auth="true" default-entity-name="CommunicationEventRole">
        <description>Update a Communication Event Role</description>
        <permission-service service-name="partyCommunicationEventPermissionCheck" main-action="UPDATE"/>
        <auto-attributes entity-name="CommunicationEventRole" include="pk" mode="IN" optional="false"/>
        <auto-attributes entity-name="CommunicationEventRole" include="nonpk" mode="IN" optional="true"/>
    </service>

    <service name="removeCommunicationEventRole" engine="groovy"
             location="component://party/groovyScripts/communication/CommunicationEventServices.groovy" invoke="removeCommunicationEventRole" auth="true">
        <description>Remove a Communication Event Role</description>
        <permission-service service-name="partyCommunicationEventPermissionCheck" main-action="DELETE"/>
        <auto-attributes entity-name="CommunicationEventRole" include="pk" mode="IN" optional="false"/>
        <attribute name="deleteCommEventIfLast" mode="IN" type="String" optional="true"/><!-- "Y" for true -->
        <attribute name="delContentDataResource" type="String" mode="IN" optional="true"/>
    </service>
    <service name="createCommEventWorkEffort" engine="simple" location="component://workeffort/minilang/workeffort/WorkEffortSimpleServices.xml" invoke="makeCommunicationEventWorkEffort" auth="true"  >
        <description>Creates a WorkEffort entity and CommunicationEventWorkEff</description>
        <auto-attributes include="pk" mode="INOUT" optional="true" entity-name="WorkEffort"/>
        <auto-attributes include="nonpk" mode="IN" optional="true" entity-name="WorkEffort"/>
        <auto-attributes include="pk" mode="INOUT" optional="false" entity-name="CommunicationEventWorkEff"/>
        <auto-attributes include="nonpk" mode="IN" optional="true" entity-name="CommunicationEventWorkEff"/>
        <override name="workEffortId" optional="true"/>
        <override name="currentStatusId" optional="false">
            <type-validate>
                <fail-property resource="WorkEffortUiLabels" property="PartyRequiredFieldMissingCurrentStatusId"/>
            </type-validate>
        </override>
        <override name="workEffortName" optional="false">
            <type-validate>
                <fail-property resource="WorkEffortUiLabels" property="PartyRequiredFieldMissingWorkEffortName"/>
            </type-validate>
        </override>
        <override name="workEffortTypeId" optional="false">
            <type-validate>
                <fail-property resource="WorkEffortUiLabels" property="PartyRequiredFieldMissingWorkEffortTypeId"/>
            </type-validate>
        </override>
    </service>

    <service name="setCommEventRoleToRead" engine="groovy" default-entity-name="CommunicationEventRole"
             location="component://party/groovyScripts/communication/CommunicationEventServices.groovy" invoke="setCommEventRoleToRead" auth="false">
        <description>Marks a communication event as read</description>
        <auto-attributes include="pk" mode="IN" optional="true"/>
        <override name="communicationEventId" optional="false"/>
    </service>
    <service name="sendCommEventAsEmail" engine="java"
            location="org.apache.ofbiz.party.communication.CommunicationEventServices" invoke="sendCommEventAsEmail" auth="true"
            transaction-timeout="7200">  <!-- set transaction time out for 2 hours, since this sometimes may run as an async service to send emails to lots of people -->
        <description>Sends a communication event as a single-part email using sendMail.  All parameters come from CommunicationEvent, which must
            be of type EMAIL_COMMUNICATION. Will look for a contactMechIdTo to send the emails</description>
        <attribute name="communicationEventId" type="String" mode="IN" optional="false"/>
    </service>
    <!-- ftp communicationEvent services -->
    <service name="sendCommEventAsFtp" engine="java"
             location="org.apache.ofbiz.party.communication.CommunicationEventServices" invoke="sendCommEventAsFtp" auth="true"
             transaction-timeout="7200">  <!-- set transaction time out for 2 hours, since this sometimes may last long during big file transfer -->
        <description>Sends communication event associated contents to a ftp server. All parameters come from CommunicationEvent, which must
            be of type FILE_TRANSFER_COMM. Will look for a contactMechIdTo to connect to Ftp</description>
        <attribute name="communicationEventId" type="String" mode="IN"/>
    </service>
    <service name="createCommEventFromFtpTransfer" engine="java"
             location="org.apache.ofbiz.party.communication.CommunicationEventServices" invoke="createCommEventFromFtpTransfer" auth="true">
        <description>Creates a CommunicationEvent record based on information before
            running a sendContentToFtp service (to be used via ECA)
        </description>
        <attribute name="partyId" type="String" mode="IN" optional="true"/>
        <attribute name="contentId" type="String" mode="IN"/>
        <attribute name="contactMechId" type="String" mode="IN"/>
        <attribute name="communicationEventId" type="String" mode="OUT"/>
    </service>


    <!--  email to communication event ECA services -->
    <service name="createCommEventFromEmail" engine="java"
        location="org.apache.ofbiz.party.communication.CommunicationEventServices" invoke="createCommEventFromEmail" auth="true">
        <description>
                Creates a CommunicationEvent record based on information before running a sendMail service (to be used via ECA)
        </description>
        <attribute name="partyId" type="String" mode="IN" optional="true"/>
        <attribute name="subject" type="String" mode="IN" optional="false"/>
        <attribute name="sendFrom" type="String" mode="IN" optional="false"/>
        <attribute name="sendTo" type="String" mode="IN" optional="false"/>
        <attribute name="contentType" type="String" mode="IN" optional="true"/>
        <attribute name="statusId" type="String" mode="IN" optional="true"/>
        <attribute name="orderId" type="String" mode="IN" optional="true"/>
        <attribute name="returnId" type="String" mode="IN" optional="true"/>
        <attribute name="communicationEventId" type="String" mode="OUT"/>
    </service>
    <service name="updateCommEventAfterEmail" engine="java"
        location="org.apache.ofbiz.party.communication.CommunicationEventServices" invoke="updateCommEventAfterEmail" auth="true">
        <description>
                Updates a CommunicationEvent record after running a sendMail service (to be used via ECA)
        </description>
        <attribute name="communicationEventId" type="String" mode="IN" optional="false"/>
        <attribute name="messageWrapper" type="org.apache.ofbiz.service.mail.MimeMessageWrapper" mode="IN" optional="false"/>
    </service>

    <service name="storeIncomingEmail" engine="java"
        location="org.apache.ofbiz.party.communication.CommunicationEventServices" invoke="storeIncomingEmail" auth="true">
        <description>
            Process incoming email. Try to determine partyIdFrom from the first SendFrom email address. datetimeStarted and datetimeEnded are the
            sent and received dates respectively, partyIdTo is from the first SendTo email address or the delivered-to address. If the parties are not found,
            the email addresses are stored in CommunicationEvent.note
            If however it is detected as spam (external) or when the 'from' email address is missing, the service will not return a communicationEventId.
            If the party cannot be found the status of the communicationEvent will be set to: COM_UNKNOWN_PARTY.
            If the parties are found the status is set to COM_ENTERED
        </description>
        <attribute name="messageWrapper" type="org.apache.ofbiz.service.mail.MimeMessageWrapper" mode="IN"/>
        <attribute name="communicationEventId" type="String" mode="OUT" optional="true"/>
        <attribute name="statusId" type="String" mode="OUT" optional="true"/>
    </service>

    <service name="sendEmailToContactList" engine="java"
            location="org.apache.ofbiz.party.communication.CommunicationEventServices" invoke="sendEmailToContactList" auth="true"
            use-transaction="true" transaction-timeout="300" max-retry="3">  <!-- Individual emails will be wrapped in their own transactions -->
            <description>Send emails to members of a contact list, wrapping each email in its own transaction and tagging each member
                that has been sent, so if the whole effort is aborted, it can start over from the middle.  The max-retry is important because if this service is
                and some emails cannot sent, it will start again later and try again</description>
        <attribute name="contactListId" type="String" mode="IN" optional="false"/>
        <attribute name="communicationEventId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="setCommEventComplete" engine="java"
        location="org.apache.ofbiz.party.communication.CommunicationEventServices" invoke="setCommEventComplete" auth="true">
        <description>Sets the status of a communication event to COM_COMPLETE using the updateCommunicationEvent service,
            set datetimeEnded to now if not defined</description>
        <attribute name="communicationEventId" type="String" mode="IN" optional="false"/>
        <attribute name="partyIdFrom" type="String" mode="IN" optional="true"/>
    </service>

    <service name="sendEmailDated" engine="groovy" use-transaction="false"
             location="component://party/groovyScripts/communication/CommunicationEventServices.groovy" invoke="sendEmailDated" auth="true">
        <description>Checks for email communication events with the status COM_IN_PROGRESS and a startdate which is expired, then send the email</description>
    </service>


    <!-- party content services -->
    <service name="createPartyContent" default-entity-name="PartyContent" engine="entity-auto" invoke="create" auth="true">
        <description>Create a PartyContent record</description>
        <auto-attributes mode="IN" include="pk" optional="false"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
        <override name="fromDate" optional="true"/>
    </service>
    <service name="updatePartyContent" default-entity-name="PartyContent" engine="entity-auto" invoke="update" auth="true">
        <description>Update a PartyContent record</description>
        <auto-attributes mode="IN" include="pk" optional="false"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
    </service>
    <service name="removePartyContent" default-entity-name="PartyContent" engine="entity-auto" invoke="delete" auth="true">
        <description>Remove a PartyContent record</description>
        <auto-attributes mode="IN" include="pk" optional="false"/>
    </service>

    <service name="createPartyTextContent" engine="group" transaction-timeout="300" auth="true">
        <description>Creates a Text Document DataResource and Content Records</description>
        <group>
            <invoke name="createTextContent" result-to-context="true"/>
            <invoke name="createPartyContent"/>
        </group>
    </service>

    <service name="uploadPartyContentFile" engine="group" transaction-timeout="300">
        <description>Upload and attach a file to a party</description>
        <group>
            <invoke name="createContentFromUploadedFile" result-to-context="true"/>
            <invoke name="createPartyContent"/>
        </group>
    </service>

    <service name="getPartyEmail" engine="groovy"
        location="component://party/groovyScripts/party/PartyServices.groovy" invoke="getPartyEmail" auth="false">
        <description>Get the main party Email address</description>
        <attribute name="partyId" type="String" mode="IN" optional="false">
                 <type-validate>
                     <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyId"/>
                 </type-validate>
             </attribute>
         <attribute name="contactMechPurposeTypeId" type="String" mode="IN" optional="false" default-value="PRIMARY_EMAIL">
             <type-validate>
                 <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingContactMechPurposeTypeId"/>
             </type-validate>
         </attribute>
        <attribute name="emailAddress" type="String" mode="OUT" optional="true"/>
        <attribute name="contactMechId" type="String" mode="OUT" optional="true"/>
    </service>

    <service name="getPartyTelephone" engine="groovy"
        location="component://party/groovyScripts/party/PartyServices.groovy" invoke="getPartyTelephone" auth="false">
        <description>Get the party Email Telephone</description>
        <attribute name="contactMechId" type="String" mode="OUT" optional="true"/>
        <attribute name="partyId" type="String" mode="IN" optional="false"/>
        <attribute name="contactMechPurposeTypeId" type="String" mode="INOUT" optional="true"/>
        <attribute name="countryCode" type="String" mode="OUT" optional="true"/>
        <attribute name="areaCode" type="String" mode="OUT" optional="true"/>
        <attribute name="contactNumber" type="String" mode="OUT" optional="true"/>
        <attribute name="extension" type="String" mode="OUT" optional="true"/>
    </service>

    <service name="getPartyPostalAddress" engine="groovy"
        location="component://party/groovyScripts/party/PartyServices.groovy" invoke="getPartyPostalAddress" auth="false">
        <description>Get the party postal address</description>
        <attribute name="partyId" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyId"/>
            </type-validate>
        </attribute>
        <attribute name="contactMechPurposeTypeId" type="String" mode="INOUT" optional="true"/>
        <attribute name="contactMechId" type="String" mode="OUT" optional="true"/>
        <attribute name="address1" type="String" mode="OUT" optional="true"/>
        <attribute name="address2" type="String" mode="OUT" optional="true"/>
        <attribute name="directions" type="String" mode="OUT" optional="true"/>
        <attribute name="city" type="String" mode="OUT" optional="true"/>
        <attribute name="postalCode" type="String" mode="OUT" optional="true"/>
        <attribute name="stateProvinceGeoId" type="String" mode="OUT" optional="true"/>
        <attribute name="countyGeoId" type="String" mode="OUT" optional="true"/>
        <attribute name="countryGeoId" type="String" mode="OUT" optional="true"/>
    </service>

    <service name="createPartyCarrierAccount" default-entity-name="PartyCarrierAccount" engine="entity-auto" invoke="create" auth="true">
        <description>Create a PartyCarrierAccount record</description>
        <auto-attributes mode="IN" include="pk" optional="false"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
        <override type="Timestamp" mode="IN" name="fromDate" optional="true"/>
        <override type="String" mode="IN" name="accountNumber" optional="false"/>
    </service>

    <service name="updatePartyCarrierAccount" default-entity-name="PartyCarrierAccount" engine="entity-auto" invoke="update" auth="true">
        <description>Update a PartyCarrierAccount record</description>
        <auto-attributes mode="IN" include="pk" optional="false"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
    </service>

    <service name="sendUpdatePersonalInfoEmailNotification" engine="groovy"
            location="component://party/groovyScripts/party/PartyServices.groovy" invoke="sendUpdatePersonalInfoEmailNotification" auth="false">
        <attribute name="partyId" type="String" mode="IN" optional="true"/>
        <attribute name="updatedUserLogin" type="org.apache.ofbiz.entity.GenericValue" mode="IN" optional="true"/>
        <attribute name="productStoreId" type="String" mode="IN" optional="true"/>
    </service>
    <service name="sendCreatePartyEmailNotification" engine="groovy"
            location="component://party/groovyScripts/party/PartyServices.groovy" invoke="sendCreatePartyEmailNotification" auth="false">
        <attribute name="partyId" type="String" mode="IN" optional="false">
             <type-validate>
                 <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyId"/>
             </type-validate>
         </attribute>
         <attribute name="emailAddress" type="String" mode="IN" optional="false">
             <type-validate>
                 <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingEmailAddress"/>
             </type-validate>
         </attribute>
         <attribute name="productStoreId" type="String" mode="IN" optional="false">
             <type-validate>
                 <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingProductStoreId"/>
             </type-validate>
         </attribute>
    </service>

    <!-- Email address verification services-->
    <service name="createEmailAddressVerification" engine="java" default-entity-name="EmailAddressVerification"
            location="org.apache.ofbiz.party.contact.ContactMechServices" invoke="createEmailAddressVerification">
        <attribute name="emailAddress" type="String" mode="IN" optional="false"/>
        <attribute name="verifyHash" type="String" mode="OUT" optional="false"/>
        <attribute name="expireDate" type="String" mode="IN" optional="true"/>
    </service>
    <service name="sendVerifyEmailAddressNotification" engine="groovy"
             location="component://party/groovyScripts/contact/ContactMechServices.groovy" invoke="sendVerifyEmailAddressNotification">
        <attribute name="emailAddress" type="String" mode="IN" optional="false">
             <type-validate>
                 <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingEmailAddress"/>
             </type-validate>
         </attribute>
    </service>
    <service name="verifyEmailAddress" engine="groovy"
             location="component://party/groovyScripts/contact/ContactMechServices.groovy" invoke="verifyEmailAddress">
        <attribute name="verifyHash" type="String" mode="IN" optional="false">
             <type-validate>
                 <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingVerifyHash"/>
             </type-validate>
         </attribute>
    </service>

    <!-- Party Invitation Services -->
    <service name="createPartyInvitation" engine="groovy" default-entity-name="PartyInvitation"
            location="component://party/groovyScripts/party/PartyInvitationServices.groovy" invoke="createPartyInvitation">
        <description>Create Party Invitation</description>
        <auto-attributes include="pk" mode="IN" optional="true"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <override name="partyInvitationId" mode="OUT" optional="false"/>
    </service>
    <service name="updatePartyInvitation" engine="groovy" default-entity-name="PartyInvitation"
            location="component://party/groovyScripts/party/PartyInvitationServices.groovy" invoke="updatePartyInvitation">
        <description>Update Party Invitation</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="deletePartyInvitation" default-entity-name="PartyInvitation"
             engine="entity-auto" invoke="delete">
        <description>Remove Party Invitation</description>
        <auto-attributes include="pk" mode="IN"/>
    </service>
    <service name="createPartyInvitationGroupAssoc" default-entity-name="PartyInvitationGroupAssoc"
             engine="entity-auto" invoke="create">
        <description>Create PartyInvitationGroupAssoc</description>
        <auto-attributes include="pk" mode="IN"/>
    </service>
    <service name="deletePartyInvitationGroupAssoc" default-entity-name="PartyInvitationGroupAssoc"
             engine="entity-auto" invoke="delete">
        <description>Remove PartyInvitationGroupAssoc</description>
        <auto-attributes include="pk" mode="IN"/>
    </service>
    <service name="createPartyInvitationRoleAssoc" default-entity-name="PartyInvitationRoleAssoc"
             engine="entity-auto" invoke="create">
        <description>Create PartyInvitationRoleAssoc</description>
        <auto-attributes include="pk" mode="IN"/>
    </service>
    <service name="deletePartyInvitationRoleAssoc" default-entity-name="PartyInvitationRoleAssoc"
             engine="entity-auto" invoke="delete">
        <description>Remove PartyInvitationRoleAssoc</description>
        <auto-attributes include="pk" mode="IN"/>
    </service>
    <service name="acceptPartyInvitation" engine="groovy"
            location="component://party/groovyScripts/party/PartyInvitationServices.groovy" invoke="acceptPartyInvitation">
        <permission-service service-name="accAndDecPartyInvitationPermissionCheck"/>
        <attribute name="partyInvitationId" type="String" mode="IN" optional="false">
             <type-validate>
                 <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyInvitationId"/>
             </type-validate>
         </attribute>
         <attribute name="partyId" type="String" mode="IN" optional="false">
             <type-validate>
                 <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyId"/>
             </type-validate>
         </attribute>
    </service>
    <service name="declinePartyInvitation" engine="groovy"
            location="component://party/groovyScripts/party/PartyInvitationServices.groovy" invoke="updatePartyInvitation">
        <permission-service service-name="accAndDecPartyInvitationPermissionCheck"/>
        <attribute name="partyInvitationId" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyInvitationId"/>
            </type-validate>
        </attribute>
        <attribute name="statusId" type="String" mode="IN" optional="true" default-value="PARTYINV_DECLINED"/>
    </service>
    <service name="cancelPartyInvitation" engine="groovy"
            location="component://party/groovyScripts/party/PartyInvitationServices.groovy" invoke="updatePartyInvitation">
        <permission-service service-name="cancelPartyInvitationPermissionCheck"/>
        <attribute name="partyInvitationId" type="String" mode="IN"/>
        <attribute name="statusId" type="String" mode="IN" optional="true" default-value="PARTYINV_CANCELLED"/>
    </service>

    <!-- Permission checking services-->
    <service name="partyBasePermissionCheck" engine="groovy"
            location="component://party/groovyScripts/party/PartyPermissionServices.groovy" invoke="basePermissionCheck">
        <description>
            Performs a basic Party Manager security check. The user must have one of the base PARTYMGR
            CRUD+ADMIN permissions.
        </description>
        <implements service="permissionInterface"/>
    </service>
    <service name="basePermissionCheck" engine="groovy" 
            location="component://party/groovyScripts/party/PartyPermissionServices.groovy" invoke="basePermissionCheck">
        <description>
            Performs a basic security check. The user must have the base PARTYMGR  permission.
        </description>
        <implements service="permissionInterface"/>
    </service>
    <service name="partyIdPermissionCheck" engine="groovy"
            location="component://party/groovyScripts/party/PartyPermissionServices.groovy" invoke="basePlusPartyIdPermissionCheck">
        <description>
            Performs a party ID security check. The userLogin partyId must equal
            the partyId parameter, or the logged-in user must have the correct permission
            to perform the operation.
        </description>
        <implements service="permissionInterface"/>
        <attribute name="partyId" type="String" mode="INOUT" optional="true"/>
    </service>
    <service name="partyStatusPermissionCheck" engine="groovy"
            location="component://party/groovyScripts/party/PartyPermissionServices.groovy" invoke="partyStatusPermissionCheck">
        <description>
            Performs a party status security check. The userLogin partyId must equal the partyId parameter OR
            the user must have one of the base PARTYMGR or PARTYMGR_STS CRUD+ADMIN permissions.
        </description>
        <implements service="permissionInterface"/>
        <attribute name="partyId" type="String" mode="IN" optional="true"/>
    </service>
    <service name="partyGroupPermissionCheck" engine="groovy"
            location="component://party/groovyScripts/party/PartyPermissionServices.groovy" invoke="partyGroupPermissionCheck">
        <description>
            Performs a party group security check. The userLogin partyId must equal the partyId parameter OR
            the user has one of the base PARTYMGR or PARTYMGR_GRP CRUD+ADMIN permissions.
        </description>
        <implements service="permissionInterface"/>
        <attribute name="partyId" type="String" mode="INOUT" optional="true"/>
    </service>
    <service name="partyDatasourcePermissionCheck" engine="groovy"
            location="component://party/groovyScripts/party/PartyPermissionServices.groovy" invoke="partyDatasourcePermissionCheck">
        <description>
            Performs a party datasource security check. The user must have one of the base PARTYMGR or
            PARTYMGR_SRC CRUD+ADMIN permissions.
        </description>
        <implements service="permissionInterface"/>
    </service>
    <service name="partyRolePermissionCheck" engine="groovy"
            location="component://party/groovyScripts/party/PartyPermissionServices.groovy" invoke="partyRolePermissionCheck">
        <description>
            Performs a party role security check. The user must have one of the base PARTYMGR or
            PARTYMGR_ROLE CRUD+ADMIN permissions.
        </description>
        <implements service="permissionInterface"/>
        <attribute name="partyId" type="String" mode="INOUT" optional="true"/>
    </service>
    <service name="partyRelationshipPermissionCheck" engine="groovy"
            location="component://party/groovyScripts/party/PartyPermissionServices.groovy" invoke="partyRelationshipPermissionCheck">
        <description>
            Performs a party relationship security check. The user must have one of the base PARTYMGR or
            PARTYMGR_REL CRUD+ADMIN permissions.
        </description>
        <implements service="permissionInterface"/>
        <attribute name="partyIdFrom" type="String" mode="IN" optional="true"/>
    </service>
    <service name="partyContactMechPermissionCheck" engine="groovy"
            location="component://party/groovyScripts/party/PartyPermissionServices.groovy" invoke="partyContactMechPermissionCheck">
        <description>
            Performs a party contact mech security check. The userLogin partyId must equal the partyId parameter OR
            the user must have one of the base PARTYMGR or PARTYMGR_PCM CRUD+ADMIN permissions.
        </description>
        <implements service="permissionInterface"/>
        <attribute name="partyId" type="String" mode="IN" optional="true"/>
    </service>
    <service name="accAndDecPartyInvitationPermissionCheck" engine="groovy"
            location="component://party/groovyScripts/party/PartyPermissionServices.groovy" invoke="accAndDecPartyInvitationPermissionCheck">
        <description>
            Performs accept and decline PartyInvitation security check. The userLogin partyId must equal the
            partyIdTo in PartyInvitation OR partyId fetched using emailAdress in PartyInvitation.
            The user with PARTYMGR_UPDATE permission can also perform this function.
        </description>
        <implements service="permissionInterface"/>
        <attribute name="partyInvitationId" type="String" mode="IN" optional="false">
             <type-validate>
                 <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyInvitationId"/>
             </type-validate>
         </attribute>
    </service>
    <service name="cancelPartyInvitationPermissionCheck" engine="groovy"
            location="component://party/groovyScripts/party/PartyPermissionServices.groovy" invoke="cancelPartyInvitationPermissionCheck">
        <description>
            Performs cancel PartyInvitation security check. The userLogin partyId must equal the
            partyId/partyIdFrom in PartyInvitation OR partyId fetched using emailAdress in PartyInvitation.
            The user with PARTYMGR_UPDATE permission can also perform this function.
        </description>
        <implements service="permissionInterface"/>
        <attribute name="partyInvitationId" type="String" mode="IN" optional="false">
             <type-validate>
                 <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyInvitationId"/>
             </type-validate>
         </attribute>
    </service>
    <service name="partyCommunicationEventPermissionCheck" engine="groovy"
            location="component://party/groovyScripts/party/PartyPermissionServices.groovy" invoke="partyCommunicationEventPermissionCheck">
        <description>Party CommunicationEvents Permission Checking Logic</description>
        <implements service="permissionInterface"/>
        <attribute name="partyIdFrom" type="String" mode="IN" optional="true"/>
        <attribute name="partyIdTo" type="String" mode="IN" optional="true"/>
    </service>
    <service name="createPostalAddressAndPurposes" engine="simple" location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="createPostalAddressAndPurposes">
        <description>Create postal address, purposes and set them defaults</description>
        <implements service="createPartyPostalAddress"/>
        <attribute name="setShippingPurpose" type="String" mode="IN" optional="true"/>
        <attribute name="setBillingPurpose" type="String" mode="IN" optional="true"/>
        <attribute name="productStoreId" type="String" mode="IN" optional="true"/>
    </service>
    <service name="updatePostalAddressAndPurposes" engine="simple" location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="updatePostalAddressAndPurposes">
        <description>Update postal address, purposes and set them defaults. The setShippingPurpose and setBillingPurpose enable the service to create purposes for PostalAddress and make them default addresses of party</description>
        <implements service="updatePartyPostalAddress"/>
        <attribute name="setShippingPurpose" type="String" mode="IN" optional="true"/>
        <attribute name="setBillingPurpose" type="String" mode="IN" optional="true"/>
        <attribute name="productStoreId" type="String" mode="IN" optional="true"/>
        <override name="contactMechId" optional="false"/>
    </service>
    <service name="updateContactMechAndPurposes" engine="simple" location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="updateContactMechAndPurposes">
        <description>Update postal address, telecom number and purposes. The setShippingPurpose and setBillingPurpose enable the service to create purposes for TelecomNumber</description>
        <implements service="updatePostalAddressAndPurposes"/>
        <auto-attributes entity-name="TelecomNumber" include="nonpk" mode="IN" optional="true"/>
        <attribute name="phoneContactMechId" type="String" mode="IN" optional="true"/>
    </service>
    <service name="createUpdatePerson" engine="groovy" default-entity-name="Person"
            location="component://party/groovyScripts/party/PartyServices.groovy" invoke="createUpdatePerson" auth="false">
        <description>Create and Update a person</description>
        <auto-attributes mode="INOUT" include="pk" optional="true"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
        <attribute name="userLogin" type="org.apache.ofbiz.entity.GenericValue" mode="IN" optional="true"/>
        <override name="firstName" optional="false"/>
        <override name="lastName" optional="false"/>
    </service>
    <service name="createUpdatePartyTelecomNumber" engine="simple"
            location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="createUpdatePartyTelecomNumber" auth="false">
        <description>Create and Update telecom number</description>
        <attribute name="partyId" type="String" mode="IN" optional="false"/>
        <auto-attributes entity-name="PartyContactMech" include="all" mode="IN" optional="true"/>
        <auto-attributes entity-name="TelecomNumber" include="nonpk" mode="IN" optional="true"/>
        <attribute name="userLogin" type="org.apache.ofbiz.entity.GenericValue" mode="IN" optional="true"/>
        <attribute name="contactMechPurposeTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="roleTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="INOUT" optional="true"/>
    </service>
    <service name="createUpdatePartyEmailAddress" engine="simple"
        location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="createUpdatePartyEmailAddress" auth="false">
        <description>Create and Update email address</description>
        <attribute name="partyId" type="String" mode="IN" optional="true"/>
        <attribute name="userLogin" type="org.apache.ofbiz.entity.GenericValue" mode="IN" optional="true"/>
        <attribute name="contactMechPurposeTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="emailAddress" type="String" mode="INOUT" optional="false"/>
        <attribute name="contactMechId" type="String" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="createUpdatePartyPostalAddress" engine="simple"
        location="component://party/minilang/contact/PartyContactMechServices.xml" invoke="createUpdatePartyPostalAddress" auth="false">
        <description>Create or Update a postal address</description>
        <attribute name="partyId" type="String" mode="IN" optional="false"/>
        <auto-attributes entity-name="PartyContactMech" include="all" mode="IN" optional="true"/>
        <auto-attributes entity-name="PostalAddress" include="nonpk" mode="IN" optional="true"/>
        <attribute name="userLogin" type="org.apache.ofbiz.entity.GenericValue" mode="IN" optional="true"/>
        <attribute name="contactMechPurposeTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="contactMechId" type="String" mode="INOUT" optional="true"/>
        <override name="address1" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingAddress1"/>
            </type-validate>
        </override>
        <override name="city" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingCity"/>
            </type-validate>
        </override>
        <override name="postalCode" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPostalCode"/>
            </type-validate>
        </override>
    </service>

     <!--  bounced message processing -->
    <service name="processBouncedMessage" engine="java"
            location="org.apache.ofbiz.party.communication.CommunicationEventServices" invoke="processBouncedMessage">
        <implements service="mailProcessInterface"/>
    </service>

    <!--  log incoming message MCA -->
    <service name="logIncomingMessage" engine="java"
            location="org.apache.ofbiz.party.communication.CommunicationEventServices" invoke="logIncomingMessage">
        <implements service="mailProcessInterface"/>
    </service>

    <service name="quickCreateCustomer" engine="groovy"
            location="component://party/groovyScripts/party/PartyServices.groovy" invoke="quickCreateCustomer">
        <description>Create customer profile on basis of First Name ,Last Name and Email Address</description>
        <attribute name="firstName" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingFirstName"/>
            </type-validate>
        </attribute>
        <attribute name="lastName" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingLastName"/>
            </type-validate>
        </attribute>
        <attribute name="emailAddress" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingEmailAddress"/>
            </type-validate>
        </attribute>
        <attribute name="partyId" type="String" mode="OUT" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyId"/>
            </type-validate>
        </attribute>
        <attribute name="contactListId" type="String" mode="IN" optional="true"/>
        <attribute name="subscribeContactList" type="String" mode="IN" optional="true"/>
    </service>

    <service name="getPartyMainRole" engine="groovy"
            location="component://party/groovyScripts/party/PartyServices.groovy" invoke="getPartyMainRole">
        <description>Get the main role of this party which is a child of the MAIN_ROLE roletypeId</description>
        <attribute name="partyId" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyId"/>
            </type-validate>
        </attribute>
        <attribute name="roleTypeId" type="String" mode="OUT" optional="true"/>
        <attribute name="description" type="String" mode="OUT" optional="true"/>
    </service>

    <service name="sendContactUsEmailToCompany" engine="groovy"
             location="component://party/groovyScripts/communication/CommunicationEventServices.groovy" invoke="sendContactUsEmailToCompany" auth="false">
        <description>Create communication event and send mail to company</description>
        <implements service="createCommunicationEventWithoutPermission"/>
        <attribute name="emailAddress" type="String" mode="IN" optional="true"/>
        <attribute name="firstName" type="String" mode="IN" optional="true"/>
        <attribute name="lastName" type="String" mode="IN" optional="true"/>
        <attribute name="postalCode" type="String" mode="IN" optional="true"/>
        <attribute name="countryCode" type="String" mode="IN" optional="true"/>
        <attribute name="emailType" type="String" mode="IN" optional="true"/>
        <attribute name="productStoreId" type="String" mode="IN" optional="true"/>
        <override name="partyIdTo" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingPartyIdTo"/>
            </type-validate>
        </override>
    </service>
    
    <!-- send account activated email notification -->
    <service name="sendAccountActivatedEmailNotification" engine="groovy"
            location="component://party/groovyScripts/party/PartyServices.groovy" invoke="sendAccountActivatedEmailNotification" auth="false">
        <attribute name="userLoginId" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingUserLoginId"/>
            </type-validate>
        </attribute>
        <attribute name="productStoreId" type="String" mode="IN" optional="false">
            <type-validate>
                <fail-property resource="PartyErrorUiLabels" property="PartyRequiredFieldMissingProductStoreId"/>
            </type-validate>
        </attribute>
    </service>
    <service name="createAgreementAttribute" default-entity-name="AgreementAttribute" engine="entity-auto" invoke="create" auth="true">
        <description>Create a AgreementAttribute entry</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="updateAgreementAttribute" default-entity-name="AgreementAttribute" engine="entity-auto" invoke="update" auth="true">
        <description>Update a AgreementAttribute record</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="deleteAgreementAttribute" default-entity-name="AgreementAttribute" engine="entity-auto" invoke="delete" auth="true">
        <description>Delete a AgreementAttribute record</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>

    <service name="importParty" engine="java"
        location="org.apache.ofbiz.party.party.PartyServices" invoke="importParty" auth="true">
        <description>Import an party with related main role, company and contact info in csv format, will ignore parties already entered</description>
        <permission-service service-name="partyGroupPermissionCheck" main-action="CREATE"/>
        <attribute mode="IN" name="uploadedFile" type="java.nio.ByteBuffer" optional="true" />
    </service>
    <service name="createAgreementItemTypeAttr" default-entity-name="AgreementItemTypeAttr" engine="entity-auto" invoke="create" auth="true">
        <description>Create a AgreementItemTypeAttr entry</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="updateAgreementItemTypeAttr" default-entity-name="AgreementItemTypeAttr" engine="entity-auto" invoke="update" auth="true">
        <description>Update a AgreementItemTypeAttr record</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="deleteAgreementItemTypeAttr" default-entity-name="AgreementItemTypeAttr" engine="entity-auto" invoke="delete" auth="true">
        <description>Delete a AgreementItemTypeAttr record</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>

    <!-- Party Role services -->
    <service name="updateRoleType" default-entity-name="RoleType" engine="entity-auto" invoke="update" auth="true">
        <description>Update a RoleType Record</description>
        <auto-attributes mode="IN" include="pk"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
    </service>
    <service name="deleteRoleType" default-entity-name="RoleType" engine="entity-auto" invoke="delete" auth="true">
        <description>Delete a RoleType Record</description>
        <auto-attributes mode="IN" include="pk"/>
    </service>
    <service name="createRoleTypeAttr" default-entity-name="RoleTypeAttr" engine="entity-auto" invoke="create" auth="true">
        <description>Create a RoleTypeAttr Record</description>
        <auto-attributes mode="IN" include="pk"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
    </service>
    <service name="updateRoleTypeAttr" default-entity-name="RoleTypeAttr" engine="entity-auto" invoke="update" auth="true">
        <description>Update a RoleTypeAttr Record</description>
        <auto-attributes mode="IN" include="pk"/>
        <auto-attributes mode="IN" include="nonpk" optional="true"/>
    </service>
    <service name="deleteRoleTypeAttr" default-entity-name="RoleTypeAttr" engine="entity-auto" invoke="delete" auth="true">
        <description>Delete a RoleTypeAttr Record</description>
        <auto-attributes mode="IN" include="pk"/>
    </service>

    <service name="createNeedType" default-entity-name="NeedType" engine="entity-auto" invoke="create" auth="true">
        <description>Create a NeedType</description>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <auto-attributes include="pk" mode="INOUT" optional="true"/>
    </service>
    <service name="updateNeedType" default-entity-name="NeedType" engine="entity-auto" invoke="update" auth="true">
        <description>Update a NeedType</description>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>
    <service name="deleteNeedType" default-entity-name="NeedType" engine="entity-auto" invoke="delete" auth="true">
        <description>Delete a NeedType</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>

    <!-- CommunicationEventPrpTyp services -->
    <service name="createCommunicationEventPrpTyp" default-entity-name="CommunicationEventPrpTyp" engine="entity-auto" invoke="create" auth="true">
        <description>Create a CommunicationEventPrpTyp</description>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <auto-attributes include="pk" mode="INOUT" optional="true"/>
    </service>
    <service name="updateCommunicationEventPrpTyp" default-entity-name="CommunicationEventPrpTyp" engine="entity-auto" invoke="update" auth="true">
        <description>Update a CommunicationEventPrpTyp</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="deleteCommunicationEventPrpTyp" default-entity-name="CommunicationEventPrpTyp" engine="entity-auto" invoke="delete" auth="true">
        <description>Delete a CommunicationEventPrpTyp</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>
</services>
