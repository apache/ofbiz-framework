<?xml version="1.0" encoding="UTF-8" ?>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<services xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://www.ofbiz.org/dtds/services.xsd">
    <description>Common Application Components Shipment Services</description>
    <vendor>OFBiz</vendor>
    <version>1.0</version>

    <!-- Shipment Services -->
    <service name="createCarrierShipmentMethod" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="createCarrierShipmentMethod" auth="true">
        <description>Creates A CarrierShipmentMethod</description>
        <auto-attributes entity-name="CarrierShipmentMethod" include="pk" mode="IN" optional="false"/>
        <auto-attributes entity-name="CarrierShipmentMethod" include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="updateCarrierShipmentMethod" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="updateCarrierShipmentMethod" auth="true">
        <description>Updates A CarrierShipmentMethod</description>
        <auto-attributes entity-name="CarrierShipmentMethod" include="pk" mode="IN" optional="false"/>
        <auto-attributes entity-name="CarrierShipmentMethod" include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="deleteCarrierShipmentMethod" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="deleteCarrierShipmentMethod" auth="true">
        <description>Deletes A CarrierShipmentMethod</description>
        <auto-attributes entity-name="CarrierShipmentMethod" include="pk" mode="IN" optional="false"/>
    </service>
    <service name="createShipmentMethodType" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="createShipmentMethodType" auth="true">
        <description>Creates A ShipmentMethodType</description>
        <auto-attributes entity-name="ShipmentMethodType" mode="IN" optional="false"/>
        <override name="sequenceNum" optional="true"/>
    </service>
    <service name="updateShipmentMethodType" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="updateShipmentMethodType" auth="true">
        <description>Updates A ShipmentMethodType</description>
        <auto-attributes entity-name="ShipmentMethodType" mode="IN" optional="false"/>
        <override name="sequenceNum" optional="true"/>
    </service>
    <service name="deleteShipmentMethodType" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="deleteShipmentMethodType" auth="true">
        <description>Deletes A ShipmentMethodType</description>
        <auto-attributes entity-name="ShipmentMethodType" include="pk" mode="IN" optional="false"/>
    </service>

    <service name="quickShipEntireOrder" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="quickShipEntireOrder" auth="true" transaction-timeout="600">
        <description>Quick Ships An Entire Order Creating One Shipment Per Facility and Ship Group.  All approved order items are
          automatically issued in full and put into one package.  The shipment is created in the INPUT status and then updated to
          PACKED and SHIPPED.
        </description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="originFacilityId" type="String" mode="IN" optional="true"/>
        <attribute name="setPackedOnly" type="String" mode="IN" optional="true"/>
        <!-- A List of Maps, each with a shipmentId,a facilityId, and a shipGroupSeqId for each shipment created -->
        <attribute name="shipmentShipGroupFacilityList" type="List" mode="OUT" optional="false"/>
    </service>
    <service name="quickShipOrderByItem" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="quickShipOrderByItem" auth="true">
        <description>Quick Ships An Order By Item</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="shipGroupSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="itemShipList" type="List" mode="IN" optional="false"/>
        <attribute name="originFacilityId" type="String" mode="IN" optional="true"/>
        <attribute name="setPackedOnly" type="String" mode="IN" optional="true"/>
        <attribute name="shipmentId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="quickShipPurchaseOrder" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="quickShipPurchaseOrder" auth="true">
        <description>The mirror of quickShipEntireOrder, this service automatically creates shipments for an entire purchase order.  
          All order items on each ship group is created as a Shipment.  All items on a Shipment are automatically issued to a Package.
          The shipment's status is first set to CREATED and then set as SHIPPED.  The facilityId is used to set the destinationFacilityId 
          of the Shipment.
        </description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="facilityId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="createShipmentForReturn" default-entity-name="ReturnHeader" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="createShipmentForReturn">
        <description>Create a Return Shipment with information from ReturnHeader fields</description>
        <required-permissions join-type="AND">
            <check-permission permission="FACILITY" action="_CREATE"/>
        </required-permissions>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <attribute name="shipmentId" type="String" mode="OUT" optional="false"/>
    </service>
    
    <service name="createShipment" default-entity-name="Shipment" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="createShipment" auth="true">
        <description>Create Shipment</description>
        <auto-attributes include="pk" mode="OUT" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true">
            <exclude field-name="createdDate"/>
            <exclude field-name="createdByUserLogin"/>
            <exclude field-name="lastModifiedDate"/>
            <exclude field-name="lastModifiedByUserLogin"/>
        </auto-attributes>
    </service>
    <service name="updateShipment" default-entity-name="Shipment" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="updateShipment" auth="true">
        <description>Update Shipment</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true">
            <exclude field-name="shipmentTypeId"/>
            <exclude field-name="createdDate"/>
            <exclude field-name="createdByUserLogin"/>
            <exclude field-name="lastModifiedDate"/>
            <exclude field-name="lastModifiedByUserLogin"/>
        </auto-attributes>
        <attribute name="shipmentTypeId" type="String" mode="INOUT" optional="true"/>
        <attribute name="oldStatusId" type="String" mode="OUT" optional="true"/>
        <attribute name="oldPrimaryOrderId" type="String" mode="OUT" optional="true"/>
        <attribute name="oldOriginFacilityId" type="String" mode="OUT" optional="true"/>
        <attribute name="oldDestinationFacilityId" type="String" mode="OUT" optional="true"/>
    </service>
    <service name="deleteShipment" default-entity-name="Shipment" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="deleteShipment" auth="true">
        <description>Delete Shipment</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>
    <service name="setShipmentSettingsFromPrimaryOrder" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="setShipmentSettingsFromPrimaryOrder" auth="true">
        <description>Set Shipment Settings From Primary Order</description>
        <attribute name="shipmentId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="setShipmentSettingsFromFacilities" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="setShipmentSettingsFromFacilities" auth="true">
        <description>Set Shipment Settings From Facilities</description>
        <attribute name="shipmentId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="sendShipmentScheduledNotification" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="sendShipmentScheduledNotification" auth="true">
        <description>Send Shipment Scheduled Notification</description>
        <attribute name="shipmentId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="balanceItemIssuancesForShipment" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="balanceItemIssuancesForShipment" auth="true">
        <description>
            Release the purchase order's items assigned to the shipment but not 
            actually received; it is invoked as a seca when the purchase shipment
            is marked as 'received'
        </description>
        <attribute name="shipmentId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="quickDropShipOrder" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="quickDropShipOrder" auth="true">
        <description>Creates a drop shipment for a ship group and calls updateShipment twice in succession to set 
            shipment status to PURCH_SHIP_SHIPPED and then to PURCH_SHIP_RECEIVED</description>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="shipGroupSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="shipmentId" type="String" mode="OUT" optional="false"/>
    </service> 

    <!-- ShipmentItem Services -->
    <service name="createShipmentItem" default-entity-name="ShipmentItem" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="createShipmentItem" auth="true">
        <description>Create ShipmentItem</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <override name="shipmentItemSeqId" mode="INOUT" optional="true"/>
    </service>
    <service name="updateShipmentItem" default-entity-name="ShipmentItem" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="updateShipmentItem" auth="true">
        <description>Update ShipmentItem</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="deleteShipmentItem" default-entity-name="ShipmentItem" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="deleteShipmentItem" auth="true">
        <description>Delete ShipmentItem</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>

    <!-- ShipmentPackage Services -->
    <service name="createShipmentPackage" default-entity-name="ShipmentPackage" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="createShipmentPackage" auth="true">
        <description>Create ShipmentPackage</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true">
            <exclude field-name="dateCreated"/>
        </auto-attributes>
        <override name="shipmentPackageSeqId" mode="INOUT" optional="true"/>
    </service>
    <service name="updateShipmentPackage" default-entity-name="ShipmentPackage" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="updateShipmentPackage" auth="true">
        <description>Update ShipmentPackage</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="deleteShipmentPackage" default-entity-name="ShipmentPackage" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="deleteShipmentPackage" auth="true">
        <description>Delete ShipmentPackage</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>

    <!-- ShipmentPackageContent Services -->
    <service name="createShipmentPackageContent" default-entity-name="ShipmentPackageContent" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="createShipmentPackageContent" auth="true">
        <description>Create ShipmentPackageContent</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <override name="shipmentPackageSeqId" mode="INOUT" optional="false"/>
    </service>
    <service name="updateShipmentPackageContent" default-entity-name="ShipmentPackageContent" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="updateShipmentPackageContent" auth="true">
        <description>Update ShipmentPackageContent</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="deleteShipmentPackageContent" default-entity-name="ShipmentPackageContent" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="deleteShipmentPackageContent" auth="true">
        <description>Delete ShipmentPackageContent</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>
    <service name="addShipmentContentToPackage" default-entity-name="ShipmentPackageContent" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="addShipmentContentToPackage" auth="true">
        <description>Add Shipment Content To Package</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <override name="quantity" mode="IN" optional="false"/>
        <override name="shipmentPackageSeqId" mode="INOUT" optional="false"/>
    </service>

    <!-- ShipmentPackageRouteSeg Services -->
    <service name="createShipmentPackageRouteSeg" default-entity-name="ShipmentPackageRouteSeg" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="createShipmentPackageRouteSeg" auth="true">
        <description>Create ShipmentPackageRouteSeg</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="updateShipmentPackageRouteSeg" default-entity-name="ShipmentPackageRouteSeg" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="updateShipmentPackageRouteSeg" auth="true">
        <description>Update ShipmentPackageRouteSeg</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="deleteShipmentPackageRouteSeg" default-entity-name="ShipmentPackageRouteSeg" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="deleteShipmentPackageRouteSeg" auth="true">
        <description>Delete ShipmentPackageRouteSeg</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>

    <!-- ShipmentContactMech Services -->
    <service name="createShipmentContactMech" default-entity-name="ShipmentContactMech" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="createShipmentContactMech" auth="true">
        <description>Create ShipmentContactMech</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="updateShipmentContactMech" default-entity-name="ShipmentContactMech" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="updateShipmentContactMech" auth="true">
        <description>Update ShipmentContactMech</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="deleteShipmentContactMech" default-entity-name="ShipmentContactMech" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="deleteShipmentContactMech" auth="true">
        <description>Delete ShipmentContactMech</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>

    <!-- ShipmentRouteSegment Services -->
    <service name="createShipmentRouteSegment" default-entity-name="ShipmentRouteSegment" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="createShipmentRouteSegment" auth="true">
        <description>Create ShipmentRouteSegment</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <override name="shipmentRouteSegmentId" mode="INOUT" optional="true"/>
    </service>
    <service name="updateShipmentRouteSegment" default-entity-name="ShipmentRouteSegment" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="updateShipmentRouteSegment" auth="true">
        <description>Update ShipmentRouteSegment</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="deleteShipmentRouteSegment" default-entity-name="ShipmentRouteSegment" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="deleteShipmentRouteSegment" auth="true">
        <description>Delete ShipmentRouteSegment</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>
    <service name="duplicateShipmentRouteSegment" default-entity-name="ShipmentRouteSegment" engine="java"
            location="org.ofbiz.shipment.shipment.ShipmentServices" invoke="duplicateShipmentRouteSegment" auth="true">
        <description>Duplicates a shipment route segment and creates the new route segment in the NOT_STARTED status</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true"/>
        <attribute name="newShipmentRouteSegmentId" type="String" mode="OUT" optional="false"/>
    </service> 
    <service name="quickScheduleShipmentRouteSegment" default-entity-name="ShipmentRouteSegment" engine="java"
            location="org.ofbiz.shipment.shipment.ShipmentServices" invoke="quickScheduleShipmentRouteSegment" auth="true">
        <description>Schedules a shipment route segment with the carrier and service level in the ShipmentRouteSegment entity.
          Actual scheduling is done by an async service, and this does not return an error, so it can be called in a multi-form,
          and one failed shipment scheduling does not cause other shipments to be rolled back.
        </description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>

    <!-- ============================================================== -->
    <!-- ItemIssuance Services -->
    <service name="createItemIssuance" default-entity-name="ItemIssuance" engine="simple"
            location="org/ofbiz/shipment/issuance/IssuanceServices.xml" invoke="createItemIssuance" auth="true">
        <description>Create ItemIssuance</description>
        <auto-attributes include="pk" mode="OUT" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true">
            <exclude field-name="issuedDateTime"/>
        </auto-attributes>
    </service>
    <service name="updateItemIssuance" default-entity-name="ItemIssuance" engine="simple"
            location="org/ofbiz/shipment/issuance/IssuanceServices.xml" invoke="updateItemIssuance" auth="true">
        <description>Update ItemIssuance</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="true">
            <exclude field-name="issuedDateTime"/>
        </auto-attributes>
    </service>
    <service name="deleteItemIssuance" default-entity-name="ItemIssuance" engine="simple"
            location="org/ofbiz/shipment/issuance/IssuanceServices.xml" invoke="deleteItemIssuance" auth="true">
        <description>Delete ItemIssuance</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>

    <!-- ItemIssuanceRole Services -->
    <service name="createItemIssuanceRole" default-entity-name="ItemIssuanceRole" engine="simple"
            location="org/ofbiz/shipment/issuance/IssuanceServices.xml" invoke="createItemIssuanceRole" auth="true">
        <description>Create ItemIssuanceRole</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>
    <service name="deleteItemIssuanceRole" default-entity-name="ItemIssuanceRole" engine="simple"
            location="org/ofbiz/shipment/issuance/IssuanceServices.xml" invoke="deleteItemIssuanceRole" auth="true">
        <description>Delete ItemIssuanceRole</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
    </service>

    <service name="issueOrderItemToShipment" engine="simple"
            location="org/ofbiz/shipment/issuance/IssuanceServices.xml" invoke="issueOrderItemToShipment" auth="true">
        <description>Issue an OrderItem to a Shipment - only for non-sales orders</description>
        <auto-attributes entity-name="Shipment" include="pk" mode="IN" optional="false"/>
        <auto-attributes entity-name="OrderItemShipGroupAssoc" include="pk" mode="IN" optional="false"/>
        <attribute name="quantity" type="Double" mode="IN" optional="false"/>
        <attribute name="shipmentItemSeqId" type="String" mode="OUT" optional="false"/>
        <attribute name="itemIssuanceId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="issueOrderItemShipGrpInvResToShipment" engine="simple"
            location="org/ofbiz/shipment/issuance/IssuanceServices.xml" invoke="issueOrderItemShipGrpInvResToShipment" auth="true">
        <description>Add an OrderItemShipGrpInvRes to a Shipment - only for sales orders</description>
        <auto-attributes entity-name="Shipment" include="pk" mode="IN" optional="false"/>
        <auto-attributes entity-name="OrderItemShipGrpInvRes" include="pk" mode="IN" optional="false"/>
        <attribute name="quantity" type="Double" mode="IN" optional="false"/>
        <attribute name="shipmentItemSeqId" type="String" mode="OUT" optional="false"/>
        <attribute name="itemIssuanceId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="issueInventoryItemToFixedAssetMaint" engine="simple"
        location="org/ofbiz/shipment/issuance/IssuanceServices.xml" invoke="issueInventoryItemToFixedAssetMaint" auth="true">
        <description>Issue an InventoryItem to a FixedAssetMaint - for conversion to use as supples/parts</description>
        <auto-attributes entity-name="InventoryItem" include="pk" mode="IN" optional="false"/>
        <auto-attributes entity-name="FixedAssetMaint" include="pk" mode="IN" optional="false"/>
        <attribute name="quantity" type="Double" mode="IN" optional="false"/>
        <attribute name="itemIssuanceId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="returnInventoryItemIssuedToFixedAssetMaint" engine="simple"
        location="org/ofbiz/shipment/issuance/IssuanceServices.xml" invoke="returnInventoryItemIssuedToFixedAssetMaint" auth="true">
        <description>Return InventoryItem Issued to a FixedAssetMaint - for conversion to use as supples/parts</description>
        <attribute name="itemIssuanceId" type="String" mode="IN" optional="false"/>
    </service>
    
    <!-- Pack Order Services -->
    <service name="packSingleItem" engine="java"
            location="org.ofbiz.shipment.packing.PackingServices" invoke="addPackLine" auth="true">
        <description>Pack Single Item</description>
        <attribute name="packingSession" type="org.ofbiz.shipment.packing.PackingSession" mode="IN" optional="false"/>
        <attribute name="productId" type="String" mode="IN" optional="false"/>
        <attribute name="orderId" type="String" mode="IN" optional="true"/>
        <attribute name="shipGroupSeqId" type="String" mode="IN" optional="true"/>
        <attribute name="quantity" type="Double" mode="IN" optional="true"/>
        <attribute name="packageSeq" type="Integer" mode="IN" optional="false"/>
        <attribute name="pickerPartyId" type="String" mode="IN" optional="true"/>
        <attribute name="handlingInstructions" type="String" mode="IN" optional="true"/>
    </service>
    <service name="packBulkItems" engine="java"
            location="org.ofbiz.shipment.packing.PackingServices" invoke="packBulk" auth="true">
        <description>Pack Multiple Items</description>
        <attribute name="packingSession" type="org.ofbiz.shipment.packing.PackingSession" mode="IN" optional="false"/>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="shipGroupSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="updateQuantity" type="Boolean" mode="IN" optional="true"/>
        <attribute name="pickerPartyId" type="String" mode="IN" optional="true"/>
        <attribute name="handlingInstructions" type="String" mode="IN" optional="true"/>
        <attribute name="nextPackageSeq" type="Integer" mode="INOUT" optional="true"/>
        <attribute name="prdInfo" type="Map" string-map-prefix="prd_" mode="IN" optional="true"/>
        <attribute name="qtyInfo" type="Map" string-map-prefix="qty_" mode="IN" optional="true"/>
        <attribute name="pkgInfo" type="Map" string-map-prefix="pkg_" mode="IN" optional="true"/>
        <attribute name="selInfo" type="Map" string-map-prefix="sel_" mode="IN" optional="true"/>
        <attribute name="wgtInfo" type="Map" string-map-prefix="wgt_" mode="IN" optional="true"/>
    </service>

    <service name="setNextPackageSeq" engine="java"
            location="org.ofbiz.shipment.packing.PackingServices" invoke="incrementPackageSeq" auth="true">
        <description>Increments the next package sequence</description>
        <attribute name="packingSession" type="org.ofbiz.shipment.packing.PackingSession" mode="IN" optional="false"/>
        <attribute name="nextPackageSeq" type="Integer" mode="OUT" optional="false"/>
    </service>

    <service name="calcPackSessionAdditionalShippingCharge" engine="java"
            location="org.ofbiz.shipment.packing.PackingServices" invoke="calcPackSessionAdditionalShippingCharge" auth="true">
        <description>Totals package weights and calls the calcShipmentCostEstimate via the PackingSession</description>
        <attribute name="packingSession" type="org.ofbiz.shipment.packing.PackingSession" mode="IN" optional="false"/>
        <attribute name="packageWeights" type="Map" string-map-prefix="packageWeight_" mode="IN" optional="true"/>
        <attribute name="weightUomId" type="String" mode="IN" optional="true"/>
        <attribute name="shippingContactMechId" type="String" mode="IN" optional="false"/>
        <attribute name="shipmentMethodTypeId" type="String" mode="IN" optional="false"/>
        <attribute name="carrierPartyId" type="String" mode="IN" optional="false"/>
        <attribute name="carrierRoleTypeId" type="String" mode="IN" optional="false"/>
        <attribute name="productStoreId" type="String" mode="IN" optional="false"/>
        <attribute name="additionalShippingCharge" type="Double" mode="OUT" optional="true"/>
    </service>

    <service name="clearPackAll" engine="java"
            location="org.ofbiz.shipment.packing.PackingServices" invoke="clearPackAll" auth="true">
        <description>Clear the current packing session</description>
        <attribute name="packingSession" type="org.ofbiz.shipment.packing.PackingSession" mode="IN" optional="false"/>
    </service>
    <service name="clearLastPackage" engine="java"
            location="org.ofbiz.shipment.packing.PackingServices" invoke="clearLastPackage" auth="true">
        <description>Clears the last package in the packing session</description>
        <attribute name="packingSession" type="org.ofbiz.shipment.packing.PackingSession" mode="IN" optional="false"/>
        <attribute name="nextPackageSeq" type="Integer" mode="OUT" optional="false"/>
    </service>
    <service name="clearPackLine" engine="java"
            location="org.ofbiz.shipment.packing.PackingServices" invoke="clearPackLine" auth="true">
        <description>Clear a single line from the current packing session</description>
        <attribute name="packingSession" type="org.ofbiz.shipment.packing.PackingSession" mode="IN" optional="false"/>
        <attribute name="orderId" type="String" mode="IN" optional="false"/>
        <attribute name="orderItemSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="shipGroupSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="inventoryItemId" type="String" mode="IN" optional="false"/>
        <attribute name="packageSeqId" type="Integer" mode="IN" optional="false"/>
    </service>

    <service name="completePack" engine="java"
            location="org.ofbiz.shipment.packing.PackingServices" invoke="completePack" auth="true">
        <description>Complete the packging set the shipment to PACKED</description>
        <attribute name="packingSession" type="org.ofbiz.shipment.packing.PackingSession" mode="IN" optional="false"/>
        <attribute name="handlingInstructions" type="String" mode="IN" optional="true"/>
        <attribute name="pickerPartyId" type="String" mode="IN" optional="true"/>
        <attribute name="additionalShippingCharge" type="Double" mode="IN" optional="true"/>
        <attribute name="forceComplete" type="Boolean" mode="IN" optional="true"/>
        <attribute name="packageWeights" type="Map" string-map-prefix="packageWeight_" mode="IN" optional="true"/>
        <attribute name="weightUomId" type="String" mode="IN" optional="true"/>
        <attribute name="shipmentId" type="String" mode="OUT" optional="false"/>
    </service>

    <!-- Shipment Plan Services -->
    <service name="addOrderShipmentToShipment" engine="simple" default-entity-name="OrderShipment"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="addOrderShipmentToShipment" auth="true">
        <description>Add an OrderShipment and a ShipmentItem - only for sales orders</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <auto-attributes include="nonpk" mode="IN" optional="false"/>
        <override name="shipmentItemSeqId" mode="IN" optional="true"/>
    </service>
    <service name="removeOrderShipmentFromShipment" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="removeOrderShipmentFromShipment" auth="true">
        <description>Delete an OrderShipment and updates the ShipmentItem</description>
        <auto-attributes entity-name="OrderShipment" include="pk" mode="IN" optional="false"/>
    </service>
    <service name="getQuantityForShipment" engine="simple" default-entity-name="OrderItem"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="getQuantityForShipment" auth="true">
        <description>get the order item quantity still not put in shipments</description>
        <auto-attributes include="pk" mode="IN" optional="false"/>
        <attribute name="remainingQuantity" type="Double" mode="OUT" optional="false"/>
    </service>
    <!-- ============================================================== -->
    <!-- Receipt Services -->
    <service name="interfaceShipmentReceipt" engine="interface" location="" invoke="">
        <description>ShipmentReceipt Interface</description>
        <auto-attributes entity-name="ShipmentReceipt" include="nonpk" mode="IN" optional="true"/>
        <attribute name="inventoryItemDetailSeqId" type="String" mode="IN" optional="true"/>
        <override name="inventoryItemId" optional="false"/>
        <override name="productId" optional="false"/>
        <override name="quantityAccepted" optional="false"/>
        <override name="quantityRejected" optional="false"/>
    </service>
    <service name="createShipmentReceipt" engine="simple"
            location="org/ofbiz/shipment/receipt/ShipmentReceiptServices.xml" invoke="createShipmentReceipt" auth="true">
        <description>Creates a ShipmentReceipt Record</description>
        <implements service="interfaceShipmentReceipt"/>
        <attribute name="receiptId" type="String" mode="OUT" optional="false"/>
    </service>
    <service name="updatePurchaseShipmentFromReceipt" engine="java"
      location="org.ofbiz.shipment.shipment.ShipmentServices" invoke="updatePurchaseShipmentFromReceipt" auth="true">
        <description>
          Whenever a ShipmentReceipt is generated, check the Shipment associated
          with it to see if all items were received. If so, change its status to
          PURCH_SHIP_RECEIVED. The check is accomplished by counting the 
          products shipped (from ShipmentAndItem) and matching them with the 
          products received (from ShipmentReceipt).
        </description>
        <attribute name="shipmentId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="receiveInventoryProduct" engine="simple"
            location="org/ofbiz/shipment/receipt/ShipmentReceiptServices.xml" invoke="receiveInventoryProduct" auth="true">
        <description>Receive Inventory In Warehouse</description>
        <auto-attributes entity-name="InventoryItem" include="nonpk" mode="IN" optional="true">
            <exclude field-name="availableToPromiseTotal"/>
            <exclude field-name="quantityOnHandTotal"/>
        </auto-attributes>
        <auto-attributes entity-name="InventoryItemDetail" include="nonpk" mode="IN" optional="true"/>
        <auto-attributes entity-name="ShipmentReceipt" include="nonpk" mode="IN" optional="true"/>
        <attribute name="inventoryItemDetailSeqId" type="String" mode="IN" optional="true"/>
        <attribute name="priorityOrderId" type="String" mode="IN" optional="true"/>
        <attribute name="priorityOrderItemSeqId" type="String" mode="IN" optional="true"/>
        <attribute name="inventoryItemId" type="String" mode="OUT" optional="true"/>        
        <override name="quantityAccepted" optional="false"/>
        <override name="quantityRejected" optional="false"/>
        <override name="inventoryItemTypeId" optional="false"/>
        <override name="productId" optional="false"/>
        <override name="facilityId" optional="false"/>
    </service>

    <service name="issueOrderItemToShipmentAndReceiveAgainstPO" engine="group" auth="true">
        <description>Issues order item quantity specified to the shipment, then receives inventory for that item and quantity</description>
        <group>
            <invoke name="issueOrderItemToShipment" result-to-context="true"/>
            <invoke name="receiveInventoryProduct" result-to-context="true"/>
        </group>
    </service>

    <service name="quickReceiveReturn" engine="simple"
            location="org/ofbiz/shipment/receipt/ShipmentReceiptServices.xml" invoke="quickReceiveReturn" auth="true">
        <attribute name="returnId" type="String" mode="IN" optional="false"/>
        <attribute name="inventoryItemTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="statusId" type="String" mode="IN" optional="true"/>
    </service>

    <service name="interfaceShipmentReceiptRole" engine="interface" location="" invoke="">
        <description>Interface for ShipmentReceiptRole</description>
        <attribute name="receiptId" type="String" mode="IN" optional="false"/>
        <attribute name="partyId" type="String" mode="IN" optional="false"/>
        <attribute name="roleTypeId" type="String" mode="IN" optional="false"/>
    </service>
    <service name="createShipmentReceiptRole" engine="simple"
            location="org/ofbiz/shipment/receipt/ShipmentReceiptServices.xml" invoke="createShipmentReceiptRole" auth="true">
        <description>Create a ShipmentReceipt Role entry</description>
        <implements service="interfaceShipmentReceiptRole"/>
    </service>
    <service name="removeShipmentReceiptRole" engine="simple"
            location="org/ofbiz/shipment/receipt/ShipmentReceiptServices.xml" invoke="removeShipmentReceiptRole" auth="true">
        <description>Remove a ShipmentReceipt Role entry</description>
        <implements service="interfaceShipmentReceiptRole"/>
    </service>

    <!-- Shipment Estimate (Rate) Services -->
    <service name="createShipmentEstimate" engine="java"
                location="org.ofbiz.shipment.shipment.ShipmentServices" invoke="createShipmentEstimate" auth="true">
        <description>Create Shipment Estimate</description>
        <attribute name="productStoreShipMethId" type="String" mode="IN" optional="false"/>
        <attribute name="toGeo" type="String" mode="IN" optional="true"/>
        <attribute name="fromGeo" type="String" mode="IN" optional="true"/>
        <attribute name="partyId" type="String" mode="IN" optional="true"/>
        <attribute name="roleTypeId" type="String" mode="IN" optional="true"/>
        <attribute name="flatPercent" type="Double" mode="IN" optional="false"/>
        <attribute name="flatPrice" type="Double" mode="IN" optional="true"/>
        <attribute name="flatItemPrice" type="Double" mode="IN" optional="true"/>
        <attribute name="shippingPricePercent" type="Double" mode="IN" optional="true"/>
        <attribute name="productFeatureGroupId" type="String" mode="IN" optional="true"/>
        <attribute name="featurePercent" type="Double" mode="IN" optional="true"/>
        <attribute name="featurePrice" type="Double" mode="IN" optional="true"/>
        <attribute name="oversizeUnit" type="Double" mode="IN" optional="true"/>
        <attribute name="oversizePrice" type="Double" mode="IN" optional="true"/>
        <attribute name="weightBreakId" type="String" mode="IN" optional="true"/>
        <attribute name="wmin" type="Double" mode="IN" optional="true"/>
        <attribute name="wmax" type="Double" mode="IN" optional="true"/>
        <attribute name="wprice" type="Double" mode="IN" optional="true"/>
        <attribute name="wuom" type="String" mode="IN" optional="true"/>
        <attribute name="quantityBreakId" type="String" mode="IN" optional="true"/>
        <attribute name="qmin" type="Double" mode="IN" optional="true"/>
        <attribute name="qmax" type="Double" mode="IN" optional="true"/>
        <attribute name="qprice" type="Double" mode="IN" optional="true"/>
        <attribute name="quom" type="String" mode="IN" optional="true"/>
        <attribute name="priceBreakId" type="String" mode="IN" optional="true"/>
        <attribute name="pmin" type="Double" mode="IN" optional="true"/>
        <attribute name="pmax" type="Double" mode="IN" optional="true"/>
        <attribute name="pprice" type="Double" mode="IN" optional="true"/>
        <attribute name="puom" type="String" mode="IN" optional="true"/>
        <attribute name="shipmentCostEstimateId" type="String" mode="OUT"/>
    </service>

    <service name="removeShipmentEstimate" engine="java"
            location="org.ofbiz.shipment.shipment.ShipmentServices" invoke="removeShipmentEstimate" auth="true">
        <description>Remove Shipment Estimate</description>
        <attribute name="shipmentCostEstimateId" type="String" mode="IN" optional="false"/>
    </service>

    <service name="calcShipmentEstimateInterface" engine="interface" location="" invoke="">
        <description>Interface for shipment estimate calc service</description>
        <attribute name="serviceConfigProps" type="String" mode="IN" optional="true"/>
        <attribute name="initialEstimateAmt" type="Double" mode="IN" optional="true"/>
        <attribute name="shippingContactMechId" type="String" mode="IN" optional="false"/>
        <attribute name="shipmentMethodTypeId" type="String" mode="IN" optional="false"/>
        <attribute name="carrierPartyId" type="String" mode="IN" optional="false"/>
        <attribute name="carrierRoleTypeId" type="String" mode="IN" optional="false"/>
        <attribute name="productStoreId" type="String" mode="IN" optional="false"/>
        <attribute name="shippableItemInfo" type="List" mode="IN" optional="false"/>
        <attribute name="shippableWeight" type="Double" mode="IN" optional="false"/>
        <attribute name="shippableQuantity" type="Double" mode="IN" optional="false"/>
        <attribute name="shippableTotal" type="Double" mode="IN" optional="false"/>
        <attribute name="shippingEstimateAmount" type="Double" mode="OUT" optional="false"/>
    </service>

    <service name="calcShipmentCostEstimate" engine="java"
            location="org.ofbiz.shipment.shipment.ShipmentServices" invoke="calcShipmentCostEstimate" auth="false">
        <description>Generic Shipment Cost Estimate Calc Service - Use ShipmentCostEstimate Entities</description>
        <implements service="calcShipmentEstimateInterface"/>
    </service>

    <!-- QuantityBreak services -->
    <service name="createQuantityBreak" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="createQuantityBreak" auth="true">
        <description>Create a QuantityBreak</description>
        <auto-attributes entity-name="QuantityBreak" include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="updateQuantityBreak" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="updateQuantityBreak" auth="true">
        <description>Update a QuantityBreak</description>
        <auto-attributes entity-name="QuantityBreak" include="pk" mode="IN" optional="false"/>
        <auto-attributes entity-name="QuantityBreak" include="nonpk" mode="IN" optional="true"/>
    </service>
    <service name="deleteQuantityBreak" engine="simple"
            location="org/ofbiz/shipment/shipment/ShipmentServices.xml" invoke="deleteQuantityBreak" auth="true">
        <description>Delete a QuantityBreak</description>
        <auto-attributes entity-name="QuantityBreak" include="pk" mode="IN" optional="false"/>
    </service>

    <service name="getShipmentPackageValueFromOrders" engine="java"
            location="org.ofbiz.shipment.shipment.ShipmentServices" invoke="getShipmentPackageValueFromOrders" auth="true">
        <description>Calculates the total value of a shipment package by totalling the results of the getOrderItemValue service
            for the orderItem related to each ShipmentPackageContent, prorated by the quantity of the orderItem packed in the 
            ShipmentPackageContent. Value is converted according to the incoming currencyUomId.</description>
        <attribute name="shipmentId" type="String" mode="IN" optional="false"/>
        <attribute name="shipmentPackageSeqId" type="String" mode="IN" optional="false"/>
        <attribute name="currencyUomId" type="String" mode="IN" optional="false"/>
        <attribute name="packageValue" type="BigDecimal" mode="OUT" optional="true"/>
    </service>

</services>
